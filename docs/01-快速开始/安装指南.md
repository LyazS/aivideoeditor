# 安装指南

## 🔧 环境要求

### 系统要求
- **操作系统**: Windows 10/11, macOS 10.15+, Linux (Ubuntu 18.04+)
- **Node.js**: >= 18.0.0
- **npm**: >= 8.0.0 (或 yarn >= 1.22.0, pnpm >= 7.0.0)
- **浏览器**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+

### 硬件要求
- **内存**: 最低 4GB RAM，推荐 8GB+
- **存储**: 至少 2GB 可用空间
- **显卡**: 支持 WebGL 2.0 的显卡（用于硬件加速）

## 📦 安装步骤

### 1. 克隆项目
```bash
git clone https://github.com/your-repo/aivideoeditor.git
cd aivideoeditor
```

### 2. 进入前端目录
```bash
cd frontend
```

### 3. 安装依赖

#### 使用 npm
```bash
npm install
```

#### 使用 yarn
```bash
yarn install
```

#### 使用 pnpm
```bash
pnpm install
```

### 4. 验证安装
```bash
npm run dev
```

如果看到以下输出，说明安装成功：
```
  VITE v4.x.x  ready in xxx ms

  ➜  Local:   http://localhost:5173/
  ➜  Network: use --host to expose
```

## 🚀 启动项目

### 开发模式
```bash
npm run dev
```
- 启动开发服务器
- 支持热重载
- 自动打开浏览器
- 访问地址：http://localhost:5173

### 构建生产版本
```bash
npm run build
```
- 生成优化后的生产版本
- 输出目录：`dist/`
- 包含代码分割和压缩

### 预览生产版本
```bash
npm run preview
```
- 本地预览生产版本
- 用于发布前测试

## 🔍 验证安装

### 1. 检查依赖版本
```bash
node --version    # 应该 >= 18.0.0
npm --version     # 应该 >= 8.0.0
```

### 2. 检查项目依赖
```bash
npm list --depth=0
```

应该看到主要依赖：
- `vue@^3.x.x`
- `@webav/av-canvas@^x.x.x`
- `@webav/av-cliper@^x.x.x`
- `pinia@^2.x.x`
- `typescript@^5.x.x`

### 3. 运行代码检查
```bash
npm run lint
```

### 4. 运行类型检查
```bash
npm run type-check
```

## ⚠️ 常见问题

### Node.js 版本问题
**问题**: `error: This version of Node.js requires a newer version`
**解决**: 升级 Node.js 到 18.0.0 或更高版本

```bash
# 使用 nvm 管理 Node.js 版本
nvm install 18
nvm use 18
```

### 依赖安装失败
**问题**: `npm ERR! peer dep missing`
**解决**: 清理缓存并重新安装

```bash
npm cache clean --force
rm -rf node_modules package-lock.json
npm install
```

### 端口占用问题
**问题**: `Error: listen EADDRINUSE: address already in use :::5173`
**解决**: 更改端口或关闭占用进程

```bash
# 方法1: 指定其他端口
npm run dev -- --port 3000

# 方法2: 查找并关闭占用进程
netstat -ano | findstr :5173  # Windows
lsof -ti:5173 | xargs kill    # macOS/Linux
```

### WebAV 相关错误
**问题**: `Failed to load WebAV modules`
**解决**: 检查浏览器兼容性和网络连接

1. 确保使用支持的浏览器版本
2. 检查网络连接
3. 清除浏览器缓存
4. 禁用浏览器扩展

### 内存不足问题
**问题**: `JavaScript heap out of memory`
**解决**: 增加 Node.js 内存限制

```bash
# 临时解决
export NODE_OPTIONS="--max-old-space-size=4096"
npm run dev

# 或在 package.json 中配置
"scripts": {
  "dev": "node --max-old-space-size=4096 node_modules/vite/bin/vite.js"
}
```

## 🔧 开发工具配置

### VS Code 推荐扩展
```json
{
  "recommendations": [
    "Vue.volar",
    "Vue.vscode-typescript-vue-plugin",
    "bradlc.vscode-tailwindcss",
    "esbenp.prettier-vscode",
    "dbaeumer.vscode-eslint"
  ]
}
```

### VS Code 设置
```json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "eslint.validate": ["javascript", "typescript", "vue"],
  "typescript.preferences.importModuleSpecifier": "relative"
}
```

### Git 配置
```bash
# 配置 Git 忽略文件权限变化（Linux/macOS）
git config core.filemode false

# 配置换行符处理
git config core.autocrlf true    # Windows
git config core.autocrlf input   # macOS/Linux
```

## 📋 环境变量配置

### 创建环境变量文件
```bash
# 开发环境
cp .env.example .env.development

# 生产环境
cp .env.example .env.production
```

### 环境变量说明
```bash
# .env.development
VITE_APP_TITLE=AI视频编辑器
VITE_API_BASE_URL=http://localhost:3000/api
VITE_ENABLE_DEBUG=true
VITE_WEBAV_DEBUG=true

# .env.production
VITE_APP_TITLE=AI视频编辑器
VITE_API_BASE_URL=https://api.example.com
VITE_ENABLE_DEBUG=false
VITE_WEBAV_DEBUG=false
```

## 🚀 下一步

安装完成后，建议：

1. **阅读快速上手指南**: [快速上手](快速上手.md)
2. **了解项目架构**: [架构设计](../03-开发文档/架构设计.md)
3. **查看开发指南**: [开发环境](../03-开发文档/开发环境.md)
4. **浏览用户文档**: [基础操作](../02-用户指南/基础操作.md)

## 📞 获取帮助

如果在安装过程中遇到问题：

1. 查看 [故障排除](../02-用户指南/故障排除.md) 文档
2. 搜索已知问题和解决方案
3. 在 GitHub Issues 中提交问题
4. 参与社区讨论

---

**提示**: 建议在开发前先熟悉 Vue 3 Composition API 和 TypeScript 基础知识。
