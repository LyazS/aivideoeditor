# 项目概述

## 🎯 项目简介

AI视频编辑器是一个基于Vue 3和WebAV技术栈的现代化视频编辑器，提供高性能的视频预览、时间轴编辑和实时渲染功能。

## 🚀 项目特色

### 核心特性
- **高性能渲染**: 基于WebAV的硬件加速视频渲染引擎
- **现代化架构**: Vue 3 + TypeScript + Pinia状态管理
- **模块化设计**: 清晰的模块分离和组件化架构
- **实时预览**: 支持实时视频预览和时间轴编辑
- **响应式界面**: 自适应布局和可调整面板大小

### 编辑功能
- ✅ 视频文件导入和预览
- ✅ 时间轴拖拽编辑
- ✅ 多选和批量操作
- ✅ 撤销/重做操作历史
- ✅ 实时播放控制
- ✅ 视频属性调整（位置、缩放、旋转、透明度）
- ✅ 多轨道支持
- ✅ 视频分辨率设置

### 高级功能
- ✅ 统一的拖拽预览系统
- ✅ 智能的选择同步机制
- ✅ 批量操作命令系统
- ✅ 完整的操作历史管理
- ✅ 冲突检测和视觉反馈

## 🛠️ 技术栈

### 前端框架
- **Vue 3**: 前端框架，使用Composition API
- **TypeScript**: 类型安全的JavaScript超集
- **Pinia**: 现代化的Vue状态管理库
- **Vite**: 快速的构建工具和开发服务器

### 视频处理
- **@webav/av-canvas**: WebAV画布渲染引擎
- **@webav/av-cliper**: 视频剪辑和处理库
- **VideoVisibleSprite**: 自定义视频精灵组件

### 开发工具
- **ESLint**: 代码质量检查
- **Prettier**: 代码格式化
- **Vue DevTools**: Vue开发调试工具

## 🏗️ 架构设计

### 模块化状态管理
项目采用模块化的状态管理架构，将不同功能拆分为独立模块：

#### 状态管理模块
- **WebAV模块**: 管理WebAV引擎的初始化和核心功能
- **媒体模块**: 处理素材库和媒体文件管理
- **播放模块**: 控制视频播放状态和时间
- **配置模块**: 管理项目设置和视频分辨率
- **轨道模块**: 处理时间轴轨道管理
- **时间轴模块**: 核心时间轴逻辑和项目管理
- **视口模块**: 管理时间轴缩放和滚动
- **选择模块**: 处理元素选择和同步
- **片段操作模块**: 视频片段的增删改查操作

#### 工具函数模块
项目采用模块化的工具函数设计，按功能领域拆分为独立模块：

- **调试工具**: 调试信息打印和开关管理
- **时间计算**: 时间格式化、对齐和计算
- **坐标转换**: 时间与像素位置互转
- **查找工具**: 时间轴项目查找和过滤
- **自动整理**: 时间轴自动排序和整理
- **缩放计算**: 缩放级别和滚动偏移计算
- **时长计算**: 各种时长相关计算
- **时间范围**: 时间范围验证和同步
- **数据验证**: 数据完整性验证和清理

### WebAV集成架构
- **单例模式**: 全局唯一的AVCanvas实例
- **组合式API**: 通过useWebAVControls提供统一的WebAV控制接口
- **异步初始化**: 支持WebAV引擎的异步加载和初始化
- **错误处理**: 完善的错误捕获和状态管理

### 数据流设计
```
UI组件 → VideoStore → 模块化状态 → WebAV引擎
   ↑                                    ↓
   ← 事件监听 ← propsChange事件 ← VideoVisibleSprite
```

## 📁 项目结构

```
frontend/
├── src/
│   ├── components/          # Vue组件
│   │   ├── VideoPreviewEngine.vue    # 主编辑器界面
│   │   ├── PreviewWindow.vue         # 视频预览窗口
│   │   ├── Timeline.vue              # 时间轴组件
│   │   ├── MediaLibrary.vue          # 素材库
│   │   ├── PlaybackControls.vue      # 播放控制
│   │   ├── PropertiesPanel.vue       # 属性面板
│   │   └── WebAVRenderer.vue         # WebAV渲染器
│   ├── stores/              # 状态管理
│   │   ├── videoStore.ts             # 主状态存储
│   │   ├── modules/                  # 模块化状态管理
│   │   └── utils/                    # 工具函数模块
│   ├── composables/         # 组合式函数
│   │   ├── useWebAVControls.ts       # WebAV控制器
│   │   └── useDragPreview.ts         # 拖拽预览管理
│   ├── utils/               # 工具类
│   │   ├── VideoVisibleSprite.ts     # 自定义视频精灵
│   │   ├── coordinateTransform.ts    # 坐标转换
│   │   ├── rotationTransform.ts      # 旋转变换
│   │   └── webavDebug.ts             # WebAV调试工具
│   ├── types/               # TypeScript类型定义
│   │   └── videoTypes.ts             # 视频相关类型
│   └── styles/              # 样式文件
│       └── common.css                # 通用样式
├── docs/                    # 项目文档
├── public/                  # 静态资源
├── package.json            # 项目依赖配置
├── vite.config.ts          # Vite配置
├── tsconfig.json           # TypeScript配置
└── eslint.config.ts        # ESLint配置
```

## 🎯 设计理念

### 用户体验优先
- 直观的拖拽操作界面
- 实时的视觉反馈
- 流畅的播放控制
- 智能的冲突检测

### 性能优化
- WebAV硬件加速渲染
- 异步视频解析
- 智能内存管理
- 帧对齐和时间精确控制

### 代码质量
- 模块化工具函数架构
- 单一职责原则设计
- 按需导入和tree-shaking优化
- 完善的TypeScript类型支持
- 向后兼容的渐进式重构

## 🔗 相关链接

### 技术资源
- [WebAV官方文档](https://github.com/hughfenghen/WebAV)
- [Vue.js官方文档](https://vuejs.org/)
- [Vite官方文档](https://vitejs.dev/)
- [Pinia官方文档](https://pinia.vuejs.org/)

### 项目文档
- [安装指南](安装指南.md) - 环境配置和依赖安装
- [快速上手](快速上手.md) - 基础操作教程
- [架构设计](../03-开发文档/架构设计.md) - 详细的技术架构说明
- [API文档](../03-开发文档/API文档.md) - 完整的API接口文档

## 🙏 致谢

- [WebAV](https://github.com/hughfenghen/WebAV) - 强大的Web视频处理库
- [Vue.js](https://vuejs.org/) - 渐进式JavaScript框架
- [Vite](https://vitejs.dev/) - 下一代前端构建工具
- [Pinia](https://pinia.vuejs.org/) - Vue的现代状态管理库
