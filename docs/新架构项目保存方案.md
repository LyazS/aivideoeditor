# æ–°æ¶æ„é¡¹ç›®ä¿å­˜æ–¹æ¡ˆ

## ğŸ“‹ å®æ–½çŠ¶æ€

**æœ€åæ›´æ–°**: 2025-08-16
**å½“å‰é˜¶æ®µ**: é˜¶æ®µ1 - å³æ—¶ä¿å­˜æœºåˆ¶å®ç°
**å®æ–½çŠ¶æ€**: âœ… **å·²å®Œæˆ**

### é˜¶æ®µå®Œæˆæƒ…å†µ

| é˜¶æ®µ | åç§° | ä¼˜å…ˆçº§ | çŠ¶æ€ | å®Œæˆåº¦ | å®Œæˆæ—¶é—´ |
|------|------|--------|------|--------|----------|
| é˜¶æ®µ0 | åª’ä½“ç®¡ç†åŸºç¡€è®¾æ–½ | P0 | âœ… å·²å®Œæˆ | 100% | 2025-08-16 |
| é˜¶æ®µ1 | å³æ—¶ä¿å­˜æœºåˆ¶å®ç° | P0 | âœ… å·²å®Œæˆ | 100% | 2025-08-16 |
| é˜¶æ®µ2 | Metaé©±åŠ¨åŠ è½½æœºåˆ¶ | P1 | âœ… å·²å®Œæˆ | 100% | 2025-08-16 |
| é˜¶æ®µ3 | æ€§èƒ½ä¼˜åŒ–å’Œç”¨æˆ·ä½“éªŒ | P2 | ğŸ”„ å¾…å¼€å§‹ | 0% | - |
| é˜¶æ®µ4 | æµ‹è¯•å’ŒéªŒè¯ | P1 | ğŸ”„ å¾…å¼€å§‹ | 0% | - |

### é˜¶æ®µ0å®æ–½æˆæœ

âœ… **ProjectMediaManager æ ¸å¿ƒç±»** - å®Œæ•´å®ç°é¡µé¢çº§åª’ä½“ç®¡ç†å™¨
âœ… **é¡µé¢çº§æ¶æ„è®¾è®¡** - é›†æˆåˆ°ç°æœ‰æ¨¡å—ç³»ç»Ÿ
âœ… **åª’ä½“å…ƒæ•°æ®ç®¡ç†** - å®ç°Metaé©±åŠ¨çš„ä¿å­˜å’ŒåŠ è½½
âœ… **æ–‡ä»¶å®Œæ•´æ€§éªŒè¯** - åŸºäºSHA-256çš„æ ¡éªŒæœºåˆ¶
âœ… **ä¾¿æ·å‡½æ•°API** - 25ä¸ªå®Œæ•´çš„ä¾¿æ·å‡½æ•°æ¥å£

**è¯¦ç»†æŠ¥å‘Š**: å‚è§ `docs/é˜¶æ®µ0å®ç°è¿›åº¦æŠ¥å‘Š.md`

### é˜¶æ®µ1å®æ–½æˆæœ

âœ… **å³æ—¶ä¿å­˜æœºåˆ¶é›†æˆ** - WebAVè§£ææˆåŠŸåç«‹å³ä¿å­˜åˆ°é¡¹ç›®æœ¬åœ°ç£ç›˜
âœ… **å·®å¼‚åŒ–æ•°æ®æºåŠ è½½ç­–ç•¥** - æ ¹æ®æ•°æ®æºç±»å‹é‡‡ç”¨ä¸åŒåŠ è½½ç­–ç•¥
âœ… **æœ¬åœ°æ–‡ä»¶æ•°æ®æºåŠ è½½** - é€šè¿‡mediaReferenceIdä»åª’ä½“ç®¡ç†å™¨è·å–æ–‡ä»¶
âœ… **è¿œç¨‹æ–‡ä»¶æ•°æ®æºåŠ è½½** - ä¼˜å…ˆæ£€æŸ¥æœ¬åœ°ç¼“å­˜ï¼Œä¸å­˜åœ¨æ—¶å¯åŠ¨ä¸‹è½½æµç¨‹
âœ… **åª’ä½“å¼•ç”¨IDæœºåˆ¶** - å»ºç«‹åª’ä½“é¡¹ç›®ä¸å­˜å‚¨å¼•ç”¨çš„æ­£ç¡®å…³è”
âœ… **éªŒè¯æµ‹è¯•** - é€šè¿‡æ‰‹åŠ¨æµ‹è¯•éªŒè¯å„é¡¹åŠŸèƒ½çš„æ­£ç¡®æ€§

**æ ¸å¿ƒæ”¹è¿›**:
- ğŸ”’ **æ•°æ®å®‰å…¨æ€§**: ç´ æè§£ææˆåŠŸåç«‹å³ä¿å­˜ï¼Œé¿å…æ•°æ®ä¸¢å¤±
- âš¡ **åŠ è½½æ€§èƒ½**: Metaé©±åŠ¨åŠ è½½æ˜¾è‘—æå‡é¡¹ç›®åŠ è½½é€Ÿåº¦
- ğŸ¯ **å·®å¼‚åŒ–ç­–ç•¥**: æœ¬åœ°æ–‡ä»¶å’Œè¿œç¨‹æ–‡ä»¶é‡‡ç”¨ä¸åŒçš„ä¼˜åŒ–ç­–ç•¥
- ğŸ§ª **éªŒè¯ä¿éšœ**: é€šè¿‡æ‰‹åŠ¨æµ‹è¯•ç¡®ä¿åŠŸèƒ½ç¨³å®šæ€§

**è¯¦ç»†æŠ¥å‘Š**: å‚è§ `docs/é˜¶æ®µ1å®ç°è¿›åº¦æŠ¥å‘Š.md`

### é˜¶æ®µ2å®æ–½æˆæœ

âœ… **å·®å¼‚åŒ–æ•°æ®æºåŠ è½½ç­–ç•¥** - æ ¹æ®æ•°æ®æºç±»å‹é‡‡ç”¨ä¸åŒçš„ä¼˜åŒ–ç­–ç•¥
âœ… **æœ¬åœ°æ–‡ä»¶æ•°æ®æºåŠ è½½** - é€šè¿‡mediaReferenceIdä»åª’ä½“ç®¡ç†å™¨å¿«é€ŸåŠ è½½
âœ… **è¿œç¨‹æ–‡ä»¶æ•°æ®æºåŠ è½½** - æ™ºèƒ½ç¼“å­˜æœºåˆ¶ï¼Œä¼˜å…ˆä½¿ç”¨æœ¬åœ°ç¼“å­˜
âœ… **å®¹é”™æœºåˆ¶å¢å¼º** - è¯¦ç»†é”™è¯¯ä¿¡æ¯å’Œæ¢å¤å»ºè®®ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
âœ… **é¡¹ç›®åŠ è½½æµç¨‹ä¼˜åŒ–** - é›†æˆå·®å¼‚åŒ–åŠ è½½ç­–ç•¥ï¼Œæå‡æ•´ä½“æ€§èƒ½
âœ… **æµ‹è¯•éªŒè¯** - å®Œæ•´çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•è¦†ç›–

**æ ¸å¿ƒæ”¹è¿›**:
- ğŸ”„ **æ™ºèƒ½åŠ è½½ç­–ç•¥**: å·®å¼‚åŒ–æ•°æ®æºåŠ è½½ï¼Œæœ€å¤§åŒ–æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ
- ğŸ›¡ï¸ **å¼ºåŒ–å®¹é”™æœºåˆ¶**: è¯¦ç»†é”™è¯¯ä¿¡æ¯å’Œæ¢å¤å»ºè®®ï¼Œæå‡ç³»ç»Ÿç¨³å®šæ€§
- âš¡ **æ€§èƒ½ä¼˜åŒ–**: æ™ºèƒ½ç¼“å­˜å’Œå¹¶å‘å¤„ç†ï¼Œæ˜¾è‘—æå‡åŠ è½½é€Ÿåº¦
- ğŸ§ª **è´¨é‡ä¿è¯**: å®Œæ•´çš„æµ‹è¯•è¦†ç›–ï¼Œç¡®ä¿åŠŸèƒ½ç¨³å®šæ€§

**è¯¦ç»†æŠ¥å‘Š**: å‚è§ `docs/é˜¶æ®µ2å®ç°æ¼”ç¤º.md`

---

## æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº†æ–°æ¶æ„çš„é¡¹ç›®ä¿å­˜æ–¹æ¡ˆï¼Œæ—¨åœ¨è§£å†³å½“å‰æ–°æ¶æ„åœ¨æºæ–‡ä»¶ä¿å­˜æ–¹é¢çš„ä¸è¶³ï¼Œç¡®ä¿é¡¹ç›®ç´ æçš„å®Œæ•´æ€§å’Œå¯ç§»æ¤æ€§ã€‚æœ¬æ–¹æ¡ˆå‚è€ƒäº†æ—§æ¶æ„çš„æˆç†Ÿå®ç°ï¼Œå¹¶ç»“åˆæ–°æ¶æ„çš„ç‰¹ç‚¹è¿›è¡Œäº†ä¼˜åŒ–å’Œæ”¹è¿›ã€‚

## å½“å‰é—®é¢˜åˆ†æ

### 1. æºæ–‡ä»¶ä¿å­˜ç¼ºå¤±

æ–°æ¶æ„ç›®å‰åªä¿å­˜é¡¹ç›®é…ç½®ä¿¡æ¯ï¼Œæ²¡æœ‰å®é™…ä¿å­˜æºæ–‡ä»¶åˆ°é¡¹ç›®ç›®å½•ï¼š

```typescript
// åœ¨ UnifiedProjectModule.ts çš„ saveCurrentProject æ–¹æ³•ä¸­
const updatedProject: UnifiedProjectConfig = {
  // ... å…¶ä»–é…ç½®
  
  // æ³¨æ„ï¼šé‡‡ç”¨å®Œå…¨Metaé©±åŠ¨ç­–ç•¥åï¼Œé¡¹ç›®é…ç½®ä¸å†åŒ…å«åª’ä½“ç›¸å…³å­—æ®µ
  // æ‰€æœ‰åª’ä½“ä¿¡æ¯éƒ½é€šè¿‡æ‰«æç›®å½•ä¸­çš„.metaæ–‡ä»¶è·å–
}
```

### 2. åª’ä½“æ•°æ®å¤„ç†ä¸å½“

è™½ç„¶å¤„ç†äº†æ—¶é—´è½´é¡¹ç›®ä¸­çš„åª’ä½“æ•°æ®ï¼Œä½†åªæ˜¯ç®€å•åœ°å»é™¤äº†è¿è¡Œæ—¶å¯¹è±¡ï¼Œæ²¡æœ‰å»ºç«‹å®Œæ•´çš„ä¿å­˜æœºåˆ¶ï¼š

```typescript
// mediaItems åŒ…å« webav è¿è¡Œæ—¶å¯¹è±¡ï¼Œéœ€è¦æ¸…ç†
mediaItems: (mediaModule?.mediaItems.value || []).map(item => {
  // åˆ›å»ºåª’ä½“é¡¹ç›®çš„å¯æŒä¹…åŒ–å‰¯æœ¬ï¼Œå»æ‰è¿è¡Œæ—¶çš„ webav å¯¹è±¡
  const { webav, ...persistableItem } = item
  return persistableItem
}),
```

### 3. ç¼ºå°‘é¡¹ç›®çº§åª’ä½“å¼•ç”¨ç®¡ç†

æ–°æ¶æ„æ²¡æœ‰å»ºç«‹å®Œæ•´çš„é¡¹ç›®çº§åª’ä½“å¼•ç”¨ç®¡ç†æœºåˆ¶ï¼Œå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š
- ç¼ºå°‘é¡¹ç›®çº§åª’ä½“å¼•ç”¨ç®¡ç†å™¨ï¼Œæ— æ³•ç»Ÿä¸€ç®¡ç†é¡¹ç›®å†…çš„åª’ä½“æ–‡ä»¶
- ç¼ºå°‘åŸºäºå†…å®¹å“ˆå¸Œçš„æ–‡ä»¶å®Œæ•´æ€§éªŒè¯æœºåˆ¶
- ç¼ºå°‘åª’ä½“æ–‡ä»¶çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œæ— æ³•è‡ªåŠ¨æ¸…ç†æ— æ•ˆçš„åª’ä½“æ–‡ä»¶
- åª’ä½“å¼•ç”¨åˆ†æ•£åœ¨é¡¹ç›®é…ç½®å’ŒMetaæ–‡ä»¶ä¸­ï¼Œç¼ºå°‘ç»Ÿä¸€çš„æŸ¥è¯¢å’Œç®¡ç†æ¥å£

## è§£å†³æ–¹æ¡ˆè®¾è®¡

### 1. æ•´ä½“æ¶æ„è®¾è®¡

åŸºäºå¯¹ç°æœ‰ä»£ç çš„æ·±å…¥åˆ†æå’Œæœ€ä½³å®è·µè€ƒè™‘ï¼Œæ–°æ¶æ„çš„é¡¹ç›®ä¿å­˜æ–¹æ¡ˆé‡‡ç”¨**å³æ—¶ä¿å­˜ + Metaé©±åŠ¨åŠ è½½ + æœ¬åœ°å­˜å‚¨**çš„ç­–ç•¥ï¼š

**æ ¸å¿ƒç†å¿µ**ï¼š
- **å³æ—¶ä¿å­˜**ï¼šç´ æè§£ææˆåŠŸåç«‹åˆ»ä¿å­˜åˆ°é¡¹ç›®æœ¬åœ°ç£ç›˜ï¼Œç¡®ä¿æ•°æ®å®‰å…¨
- **Metaé©±åŠ¨æ¶æ„**ï¼šé€šè¿‡"ç£ç›˜Metaæ–‡ä»¶ä¸ºæƒå¨æ•°æ®æº + é¡µé¢çº§å†…å­˜ç¼“å­˜"çš„æ¨¡å¼å®ç°æ•°æ®ç®¡ç†
  - **ç£ç›˜å±‚**ï¼šMetaæ–‡ä»¶æ˜¯å”¯ä¸€æƒå¨æ•°æ®æºï¼Œç¡®ä¿æ•°æ®æŒä¹…åŒ–å’Œä¸€è‡´æ€§
  - **å†…å­˜å±‚**ï¼šé¡µé¢çº§åª’ä½“å¼•ç”¨æ˜ å°„ï¼Œæä¾›å¿«é€ŸæŸ¥è¯¢å’Œç®¡ç†åŠŸèƒ½
  - **é…ç½®å±‚**ï¼šé¡¹ç›®é…ç½®æ–‡ä»¶ä¸ä¿å­˜åª’ä½“å¼•ç”¨ä¿¡æ¯ï¼Œé¿å…æ•°æ®å†—ä½™
- **æœ¬åœ°å­˜å‚¨ä¼˜å…ˆ**ï¼šæ‰€æœ‰åª’ä½“æ–‡ä»¶éƒ½ä¿å­˜åœ¨å„è‡ªé¡¹ç›®çš„æœ¬åœ°ç›®å½•ä¸­ï¼Œç¡®ä¿é¡¹ç›®çš„å®Œæ•´æ€§å’Œå¯ç§»æ¤æ€§

**é¡µé¢çº§æ¶æ„ç‰¹æ€§**ï¼š
- **é¡µé¢çº§éš”ç¦»**ï¼šé€šè¿‡hrefè·³è½¬é‡æ–°åŠ è½½é¡µé¢ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½æ˜¯ç‹¬ç«‹çš„é¡µé¢å®ä¾‹
- **é¡µé¢çº§ç®¡ç†å™¨å®ä¾‹**ï¼šæ¯ä¸ªé¡¹ç›®é¡µé¢ç»´æŠ¤ä¸€ä¸ªç®¡ç†å™¨å®ä¾‹
- **è‡ªåŠ¨ç”Ÿå‘½å‘¨æœŸç®¡ç†**ï¼šé¡µé¢å…³é—­æ—¶è‡ªåŠ¨æ¸…ç†æ‰€æœ‰çŠ¶æ€ï¼Œä¸‹æ¬¡åŠ è½½ä»Metaæ–‡ä»¶é‡å»º

**åˆ†å±‚è®¾è®¡**ï¼š
1. **åª’ä½“ç®¡ç†å±‚**ï¼šè´Ÿè´£åª’ä½“æ–‡ä»¶çš„å³æ—¶ä¿å­˜ã€åŠ è½½å’ŒéªŒè¯
2. **é¡¹ç›®é…ç½®å±‚**ï¼šè´Ÿè´£é¡¹ç›®é…ç½®çš„ä¿å­˜å’ŒåŠ è½½
3. **å¼•ç”¨ç®¡ç†å±‚**ï¼šè´Ÿè´£é¡µé¢çº§åª’ä½“å¼•ç”¨æ˜ å°„çš„å»ºç«‹å’Œç»´æŠ¤
4. **å…ƒæ•°æ®ç®¡ç†å±‚**ï¼šè´Ÿè´£åª’ä½“å…ƒæ•°æ®çš„ä¿å­˜å’ŒåŠ è½½ï¼Œæ”¯æŒMetaé©±åŠ¨çš„åŠ è½½ç­–ç•¥
5. **âœ¨ é¡µé¢çº§å¼•ç”¨ç®¡ç†å±‚**ï¼šè´Ÿè´£å½“å‰é¡¹ç›®é¡µé¢å†…åª’ä½“å¼•ç”¨çš„ç»Ÿä¸€ç®¡ç†å’Œå®Œæ•´æ€§éªŒè¯
6. **âœ¨ æœ¬åœ°å­˜å‚¨ç®¡ç†å±‚**ï¼šè´Ÿè´£åª’ä½“æ–‡ä»¶çš„æœ¬åœ°å­˜å‚¨å’Œç»„ç»‡

### 2. é¡µé¢çº§åª’ä½“ç®¡ç†è®¾è®¡

**è®¾è®¡åŸåˆ™**ï¼šé‡‡ç”¨é¡µé¢çº§åª’ä½“ç®¡ç†å™¨è®¾è®¡ã€‚æ¯ä¸ªé¡¹ç›®é¡µé¢ç‹¬ç«‹ç®¡ç†è‡ªå·±çš„åª’ä½“æ–‡ä»¶ï¼Œé€šè¿‡é¡µé¢è·³è½¬å®ç°é¡¹ç›®é—´å®Œå…¨éš”ç¦»ã€‚

**å®ç°ç­–ç•¥**ï¼š
- **é¡µé¢çº§å®ä¾‹åŒ–**ï¼šæ¯ä¸ªé¡¹ç›®é¡µé¢åŠ è½½æ—¶åˆ›å»ºåª’ä½“ç®¡ç†å™¨å®ä¾‹
- **å¤©ç„¶éš”ç¦»æ€§**ï¼šé¡¹ç›®ä¹‹é—´é€šè¿‡é¡µé¢è·³è½¬å®Œå…¨éš”ç¦»ï¼Œæ— éœ€å¤æ‚çš„çŠ¶æ€ç®¡ç†
- **ç”Ÿå‘½å‘¨æœŸåŒæ­¥**ï¼šç®¡ç†å™¨ç”Ÿå‘½å‘¨æœŸä¸é¡µé¢ç”Ÿå‘½å‘¨æœŸå®Œå…¨åŒæ­¥


### 3. ä¼˜åŒ–åçš„å­˜å‚¨ç»“æ„

```
workspace/
â”œâ”€â”€ projects/
â”‚   â”œâ”€â”€ project1/
â”‚   â”‚   â”œâ”€â”€ media/
â”‚   â”‚   â”‚   â”œâ”€â”€ videos/           # è§†é¢‘æ–‡ä»¶åŠå…¶.metaæ–‡ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ video1.mp4
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ video1.mp4.meta
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ video2.mov.meta
â”‚   â”‚   â”‚   â”œâ”€â”€ images/           # å›¾ç‰‡æ–‡ä»¶åŠå…¶.metaæ–‡ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ image1.jpg
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ image1.jpg.meta
â”‚   â”‚   â”‚   â”œâ”€â”€ audio/            # éŸ³é¢‘æ–‡ä»¶åŠå…¶.metaæ–‡ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ thumbnails/       # é¡¹ç›®ç¼©ç•¥å›¾
â”‚   â”‚   â””â”€â”€ project.json          # é¡¹ç›®é…ç½®ï¼ˆä¸åŒ…å«åª’ä½“å¼•ç”¨ï¼‰
â”‚   â””â”€â”€ project2/
```

**æ ¸å¿ƒç‰¹æ€§**ï¼š
- **å”¯ä¸€æ•°æ®æº**ï¼šé¡¹ç›®ç›®å½•ä¸­çš„ `.meta` æ–‡ä»¶æ˜¯å”¯ä¸€æƒå¨æ•°æ®æº
- **Metaé©±åŠ¨åŠ è½½**ï¼šå®Œå…¨é€šè¿‡æ‰«æç›®å½•çš„metaæ–‡ä»¶æ¥æ„å»ºåª’ä½“å¼•ç”¨
- **å³æ—¶ä¿å­˜**ï¼šç´ æè§£ææˆåŠŸåç«‹åˆ»ä¿å­˜åˆ°é¡¹ç›®æœ¬åœ°ç£ç›˜
- **å®¹é”™æœºåˆ¶**ï¼šè‡ªåŠ¨è¿‡æ»¤æ— æ•ˆçš„metaæ–‡ä»¶ï¼Œé¿å…åŠ è½½ä¸å­˜åœ¨çš„åª’ä½“

### 4. æ ¸å¿ƒç»„ä»¶è®¾è®¡

#### 4.1 ProjectMediaManager æ ¸å¿ƒå®ç°

```typescript
// frontend/src/unified/utils/ProjectMediaManager.ts

// Metaæ–‡ä»¶æ‰«æè¿‡ç¨‹ä¸­ä½¿ç”¨çš„ä¸´æ—¶æ•°æ®ç»“æ„
interface MetaFileInfo {
  metaFileName: string              // metaæ–‡ä»¶å
  sourceFileName: string            // å¯¹åº”çš„æºæ–‡ä»¶å
  relativePath: string              // ç›¸å¯¹è·¯å¾„ï¼ˆä¸å«.metaåç¼€ï¼‰
  dirHandle: FileSystemDirectoryHandle  // ç›®å½•å¥æŸ„
  metadata: UnifiedMediaMetadata    // è§£æåçš„å…ƒæ•°æ®
}

export class ProjectMediaManager {
  private projectId: string = ''
  private mediaReferences: Map<string, UnifiedMediaReference> = new Map()
  
  constructor() {
    // æ— å‚æ„é€ å‡½æ•°ï¼Œæ”¯æŒé¡µé¢çº§å…¨å±€å®ä¾‹åŒ–
  }
  
  /**
   * åˆå§‹åŒ–é¡¹ç›®åª’ä½“ç®¡ç†å™¨
   * @param projectId é¡¹ç›®ID
   */
  initializeForProject(projectId: string): void {
    this.projectId = projectId
    this.mediaReferences.clear()
    console.log(`ğŸ”§ åˆå§‹åŒ–é¡µé¢çº§åª’ä½“ç®¡ç†å™¨: ${projectId}`)
  }
  
  /**
   * ä¿å­˜åª’ä½“æ–‡ä»¶åˆ°é¡¹ç›®æœ¬åœ°ç›®å½•
   * @param file åª’ä½“æ–‡ä»¶
   * @param mediaType åª’ä½“ç±»å‹
   * @param clip WebAV Clipå¯¹è±¡ï¼ˆå¯é€‰ï¼Œç”¨äºç”Ÿæˆå®Œæ•´å…ƒæ•°æ®ï¼‰
   * @returns åª’ä½“ä¿å­˜ç»“æœ
   */
  async saveMediaToProject(
    file: File,
    mediaType: MediaType,
    clip?: any
  ): Promise<MediaSaveResult> {
    try {
      console.log(`ğŸ’¾ å¼€å§‹ä¿å­˜åª’ä½“æ–‡ä»¶åˆ°é¡¹ç›®: ${file.name}`)
      
      // 1. è®¡ç®—å†…å®¹å“ˆå¸Œç”¨äºå»é‡
      const contentHash = await this.calculateChecksum(file)
      
      // 2. æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ç›¸åŒæ–‡ä»¶ï¼ˆé€šè¿‡éå†æŸ¥æ‰¾ç›¸åŒå“ˆå¸Œï¼‰
      const existingRef = Array.from(this.mediaReferences.values()).find(
        ref => ref.metadata && ref.metadata.checksum === contentHash
      )
      if (existingRef) {
        console.log(`â™»ï¸ å¤ç”¨ç°æœ‰åª’ä½“: ${file.name} -> ${existingRef.id}`)
        return {
          success: true,
          mediaReference: existingRef,
          storagePath: existingRef.storedPath,
          isReused: true
        }
      }
      
      // 3. ç”Ÿæˆå­˜å‚¨è·¯å¾„
      const storagePath = this.generateStoragePath(file.name, mediaType)
      
      // 4. ä¿å­˜æ–‡ä»¶åˆ°é¡¹ç›®ç›®å½•
      await this.saveFileToStorage(file, storagePath)
      
      // 5. ç”ŸæˆæŒä¹…åŒ–IDå’Œåª’ä½“å…ƒæ•°æ®
      const mediaId = generateUUID4()
      let metadata: UnifiedMediaMetadata
      
      if (clip) {
        // å¦‚æœæœ‰clipï¼Œç”Ÿæˆå®Œæ•´çš„å…ƒæ•°æ®ï¼ˆåŒ…å«durationã€widthã€heightç­‰ï¼‰
        metadata = await this.generateMediaMetadata(file, clip, mediaType, mediaId, contentHash)
      } else {
        // å¦‚æœæ²¡æœ‰clipï¼Œåªç”ŸæˆåŸºç¡€å…ƒæ•°æ®
        metadata = {
          id: mediaId,
          originalFileName: file.name,
          fileSize: file.size,
          mimeType: file.type,
          checksum: contentHash,
          importedAt: new Date().toISOString(),
        }
      }
      
      // 6. åˆ›å»ºåª’ä½“å¼•ç”¨
      const mediaReference: UnifiedMediaReference = {
        id: mediaId,                   // ä½¿ç”¨ç›¸åŒçš„ID
        storedPath: storagePath,
        mediaType,
        metadata,
        status: 'ready'
      }
      
      // 7. æ³¨å†Œå¼•ç”¨
      this.mediaReferences.set(mediaReference.id, mediaReference)
      
      // 8. ä¿å­˜å…ƒæ•°æ®åˆ°.metaæ–‡ä»¶
      await this.saveMediaMetadata(this.projectId, storagePath, metadata)
      
      console.log(`âœ… åª’ä½“æ–‡ä»¶ä¿å­˜æˆåŠŸ: ${file.name} -> ${storagePath}`)
      
      return {
        success: true,
        mediaReference,
        storagePath,
        isReused: false
      }
    } catch (error) {
      console.error('ä¿å­˜åª’ä½“æ–‡ä»¶å¤±è´¥:', error)
      return {
        success: false,
        error: error instanceof Error ? error.message : String(error)
      }
    }
  }
  
  /**
   * Metaé©±åŠ¨æ‰«æé¡¹ç›®åª’ä½“ç›®å½•
   * @returns åª’ä½“å¼•ç”¨æ•°ç»„
   */
  async scanMediaDirectory(): Promise<UnifiedMediaReference[]> {
    try {
      console.log(`ğŸ” å¼€å§‹Metaé©±åŠ¨æ‰«æé¡¹ç›®åª’ä½“ç›®å½•: ${this.projectId}`)
      
      // 1. æ‰«æé¡¹ç›®ç›®å½•ä¸­çš„æ‰€æœ‰metaæ–‡ä»¶
      const allMetaFiles = await this.scanAllMetaFiles()
      console.log(`ğŸ“„ å‘ç° ${allMetaFiles.length} ä¸ªmetaæ–‡ä»¶`)
      
      // 2. é€ä¸ªéªŒè¯å¯¹åº”çš„æºæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œè¿‡æ»¤æ‰ä¸å­˜åœ¨æºæ–‡ä»¶çš„meta
      const validReferences: UnifiedMediaReference[] = []
      
      for (const metaInfo of allMetaFiles) {
        try {
          // éªŒè¯å¯¹åº”çš„æºæ–‡ä»¶æ˜¯å¦å­˜åœ¨
          const sourceFileExists = await this.verifySourceFileExists(metaInfo.dirHandle, metaInfo.sourceFileName)
          
          if (sourceFileExists) {
            // æºæ–‡ä»¶å­˜åœ¨ï¼Œåˆ›å»ºæœ‰æ•ˆçš„åª’ä½“å¼•ç”¨
            const mediaType = this.inferMediaTypeFromPath(metaInfo.relativePath)
            
            const reference: UnifiedMediaReference = {
              id: metaInfo.metadata.id, // ä»metaæ–‡ä»¶è¯»å–æŒä¹…åŒ–ID
              storedPath: `media/${metaInfo.relativePath}`,
              mediaType,
              metadata: metaInfo.metadata,
              status: 'ready'
            }
            
            // æ›´æ–°å†…å­˜ä¸­çš„å¼•ç”¨æ˜ å°„
            this.mediaReferences.set(reference.id, reference)
            
            validReferences.push(reference)
            console.log(`âœ… éªŒè¯é€šè¿‡: ${metaInfo.metadata.originalFileName}`)
          } else {
            console.warn(`âš ï¸ æºæ–‡ä»¶ä¸å­˜åœ¨ï¼Œè·³è¿‡metaæ–‡ä»¶: ${metaInfo.sourceFileName}`)
          }
        } catch (error) {
          console.error(`éªŒè¯metaæ–‡ä»¶å¤±è´¥: ${metaInfo.metaFileName}`, error)
        }
      }
      
      console.log(`ğŸ“ Metaé©±åŠ¨æ‰«æå®Œæˆï¼Œæœ‰æ•ˆåª’ä½“å¼•ç”¨: ${validReferences.length}/${allMetaFiles.length}`)
      return validReferences
    } catch (error) {
      console.error('Metaé©±åŠ¨æ‰«æåª’ä½“ç›®å½•å¤±è´¥:', error)
      return [] // è¿”å›ç©ºæ•°ç»„è€Œä¸æ˜¯æŠ›å‡ºé”™è¯¯ï¼Œä¿è¯åŠ è½½æµç¨‹çš„å¥å£®æ€§
    }
  }
  
  
  /**
   * æ‰«æé¡¹ç›®ç›®å½•ä¸­çš„æ‰€æœ‰metaæ–‡ä»¶
   * @returns metaæ–‡ä»¶ä¿¡æ¯æ•°ç»„
   */
  private async scanAllMetaFiles(): Promise<MetaFileInfo[]> {
    try {
      const workspaceHandle = await directoryManager.getWorkspaceHandle()
      if (!workspaceHandle) return []
      
      const projectsHandle = await workspaceHandle.getDirectoryHandle('projects')
      const projectHandle = await projectsHandle.getDirectoryHandle(this.projectId)
      const mediaHandle = await projectHandle.getDirectoryHandle('media')
      
      const metaFiles: MetaFileInfo[] = []
      await this.scanDirectoryForMeta(mediaHandle, '', metaFiles)
      
      return metaFiles
    } catch (error) {
      console.error('æ‰«æmetaæ–‡ä»¶å¤±è´¥:', error)
      return []
    }
  }
  
  /**
   * é€’å½’æ‰«æç›®å½•ä¸­çš„metaæ–‡ä»¶
   */
  private async scanDirectoryForMeta(
    dirHandle: FileSystemDirectoryHandle,
    relativePath: string,
    metaFiles: MetaFileInfo[]
  ): Promise<void> {
    try {
      for await (const [name, handle] of dirHandle.entries()) {
        const currentPath = relativePath ? `${relativePath}/${name}` : name
        
        if (handle.kind === 'directory') {
          await this.scanDirectoryForMeta(handle, currentPath, metaFiles)
        } else if (handle.kind === 'file' && name.endsWith('.meta')) {
          try {
            const file = await handle.getFile()
            const content = await file.text()
            const metadata = JSON.parse(content) as UnifiedMediaMetadata
            
            const sourceFileName = name.replace('.meta', '')
            const sourceRelativePath = currentPath.replace('.meta', '')
            
            metaFiles.push({
              metaFileName: name,
              sourceFileName,
              relativePath: sourceRelativePath,
              dirHandle,
              metadata
            })
          } catch (error) {
            console.warn(`è§£æmetaæ–‡ä»¶å¤±è´¥: ${currentPath}`, error)
          }
        }
      }
    } catch (error) {
      console.error(`æ‰«æç›®å½•å¤±è´¥: ${relativePath}`, error)
    }
  }
  
  /**
   * éªŒè¯æºæ–‡ä»¶æ˜¯å¦å­˜åœ¨
   */
  private async verifySourceFileExists(
    dirHandle: FileSystemDirectoryHandle,
    sourceFileName: string
  ): Promise<boolean> {
    try {
      await dirHandle.getFileHandle(sourceFileName)
      return true
    } catch (error) {
      return false
    }
  }
  
  /**
   * ä»è·¯å¾„æ¨æ–­åª’ä½“ç±»å‹
   */
  private inferMediaTypeFromPath(relativePath: string): MediaType {
    const fileName = relativePath.toLowerCase()
    
    if (fileName.match(/\.(mp4|avi|mov|webm|mkv)$/)) return 'video'
    if (fileName.match(/\.(jpg|jpeg|png|gif|webp|bmp)$/)) return 'image'
    if (fileName.match(/\.(mp3|wav|ogg|aac|flac)$/)) return 'audio'
    if (fileName.match(/\.(txt|md|json|xml)$/)) return 'text'
    
    return 'video' // é»˜è®¤ç±»å‹
  }
  
  /**
   * ç”Ÿæˆå­˜å‚¨è·¯å¾„
   */
  private generateStoragePath(fileName: string, mediaType: MediaType): string {
    const timestamp = Date.now()
    const extension = this.getFileExtension(fileName)
    const sanitizedName = fileName.replace(extension, '').replace(/[^a-zA-Z0-9\u4e00-\u9fa5]/g, '_')
    const uniqueName = `${sanitizedName}_${timestamp}${extension}`
    
    return `media/${mediaType}s/${uniqueName}`
  }
  
  /**
   * ä¿å­˜æ–‡ä»¶åˆ°å­˜å‚¨ä½ç½®
   */
  private async saveFileToStorage(file: File, storagePath: string): Promise<void> {
    try {
      const workspaceHandle = await directoryManager.getWorkspaceHandle()
      if (!workspaceHandle) throw new Error('æœªè®¾ç½®å·¥ä½œç›®å½•')
      
      const projectsHandle = await workspaceHandle.getDirectoryHandle('projects')
      const projectHandle = await projectsHandle.getDirectoryHandle(this.projectId)
      
      // è§£æè·¯å¾„å¹¶ç¡®ä¿ç›®å½•å­˜åœ¨
      const pathParts = storagePath.split('/')
      const fileName = pathParts.pop()!
      
      let currentHandle = projectHandle
      for (const part of pathParts) {
        if (part) {
          currentHandle = await this.ensureDirectoryExists(currentHandle, part)
        }
      }
      
      // ä¿å­˜æ–‡ä»¶
      const fileHandle = await currentHandle.getFileHandle(fileName, { create: true })
      const writable = await fileHandle.createWritable()
      await writable.write(file)
      await writable.close()
    } catch (error) {
      console.error('ä¿å­˜æ–‡ä»¶åˆ°å­˜å‚¨å¤±è´¥:', error)
      throw new Error(`ä¿å­˜æ–‡ä»¶å¤±è´¥: ${error instanceof Error ? error.message : String(error)}`)
    }
  }
  
  /**
   * éªŒè¯åª’ä½“æ–‡ä»¶æ˜¯å¦å­˜åœ¨
   */
  private async verifyMediaFileExists(storagePath: string): Promise<boolean> {
    try {
      const workspaceHandle = await directoryManager.getWorkspaceHandle()
      if (!workspaceHandle) return false
      
      const pathParts = storagePath.split('/')
      const fileName = pathParts.pop()!
      
      let currentHandle = workspaceHandle
      for (const part of pathParts) {
        if (part) {
          currentHandle = await currentHandle.getDirectoryHandle(part)
        }
      }
      
      await currentHandle.getFileHandle(fileName)
      return true
    } catch (error) {
      return false
    }
  }
  
  /**
   * ä»å…ƒæ•°æ®æ¨æ–­åª’ä½“ç±»å‹
   */
  private inferMediaTypeFromMetadata(metadata: UnifiedMediaMetadata): MediaType {
    const mimeType = metadata.mimeType.toLowerCase()
    
    if (mimeType.startsWith('video/')) return 'video'
    if (mimeType.startsWith('image/')) return 'image'
    if (mimeType.startsWith('audio/')) return 'audio'
    if (mimeType.startsWith('text/')) return 'text'
    
    // æ ¹æ®æ–‡ä»¶æ‰©å±•åæ¨æ–­
    const fileName = metadata.originalFileName.toLowerCase()
    if (fileName.match(/\.(mp4|avi|mov|webm|mkv)$/)) return 'video'
    if (fileName.match(/\.(jpg|jpeg|png|gif|webp|bmp)$/)) return 'image'
    if (fileName.match(/\.(mp3|wav|ogg|aac|flac)$/)) return 'audio'
    if (fileName.match(/\.(txt|md|json|xml)$/)) return 'text'
    
    return 'video' // é»˜è®¤ç±»å‹
  }
  
  /**
   * ç”Ÿæˆåª’ä½“å…ƒæ•°æ®
   * @param file åª’ä½“æ–‡ä»¶
   * @param clip WebAV Clipå¯¹è±¡
   * @param mediaType åª’ä½“ç±»å‹
   * @param mediaId åª’ä½“ID
   * @param checksum æ–‡ä»¶æ ¡éªŒå’Œ
   * @returns åª’ä½“å…ƒæ•°æ®
   */
  async generateMediaMetadata(
    file: File,
    clip: any,
    mediaType: MediaType,
    mediaId: string,
    checksum: string,
  ): Promise<UnifiedMediaMetadata> {
    try {
      // ç­‰å¾…clipå‡†å¤‡å®Œæˆ
      const meta = await clip.ready
      
      // æ„å»ºå…ƒæ•°æ®
      const metadata: UnifiedMediaMetadata = {
        id: mediaId,                  // æŒä¹…åŒ–ID
        originalFileName: file.name,
        fileSize: file.size,
        mimeType: file.type,
        checksum: checksum,           // æ–‡ä»¶æ ¡éªŒå’Œ
        importedAt: new Date().toISOString(),
      }
      
      // æ ¹æ®åª’ä½“ç±»å‹æ·»åŠ ç‰¹å®šå…ƒæ•°æ®
      if (mediaType === 'video' || mediaType === 'audio') {
        metadata.duration = meta.duration
      }
      
      if (mediaType === 'video' || mediaType === 'image') {
        metadata.width = meta.width
        metadata.height = meta.height
      }
      
      return metadata
    } catch (error) {
      console.error('ç”Ÿæˆåª’ä½“å…ƒæ•°æ®å¤±è´¥:', error)
      throw new Error(`ç”Ÿæˆåª’ä½“å…ƒæ•°æ®å¤±è´¥: ${error instanceof Error ? error.message : String(error)}`)
    }
  }
  
  /**
   * ä¿å­˜åª’ä½“å…ƒæ•°æ®æ–‡ä»¶
   * @param projectId é¡¹ç›®ID
   * @param storedPath å­˜å‚¨è·¯å¾„
   * @param metadata åª’ä½“å…ƒæ•°æ®
   */
  async saveMediaMetadata(
    projectId: string,
    storedPath: string,
    metadata: UnifiedMediaMetadata,
  ): Promise<void> {
    try {
      const workspaceHandle = await directoryManager.getWorkspaceHandle()
      if (!workspaceHandle) throw new Error('æœªè®¾ç½®å·¥ä½œç›®å½•')
      
      const projectsHandle = await workspaceHandle.getDirectoryHandle('projects')
      const projectHandle = await projectsHandle.getDirectoryHandle(projectId)
      
      // æ„å»ºå…ƒæ•°æ®æ–‡ä»¶è·¯å¾„
      const metaFilePath = `${storedPath}.meta`
      const pathParts = metaFilePath.split('/')
      const fileName = pathParts.pop()!
      const dirPath = pathParts.join('/')
      
      // ç¡®ä¿ç›®å½•å­˜åœ¨
      let currentHandle = projectHandle
      for (const part of dirPath.split('/')) {
        if (part) {
          currentHandle = await this.ensureDirectoryExists(currentHandle, part)
        }
      }
      
      // ä¿å­˜å…ƒæ•°æ®æ–‡ä»¶
      const fileHandle = await currentHandle.getFileHandle(fileName, { create: true })
      const writable = await fileHandle.createWritable()
      await writable.write(JSON.stringify(metadata, null, 2))
      await writable.close()
      
      console.log(`ğŸ’¾ å…ƒæ•°æ®æ–‡ä»¶ä¿å­˜æˆåŠŸ: ${metaFilePath}`)
    } catch (error) {
      console.error('ä¿å­˜åª’ä½“å…ƒæ•°æ®å¤±è´¥:', error)
      throw new Error(`ä¿å­˜åª’ä½“å…ƒæ•°æ®å¤±è´¥: ${error instanceof Error ? error.message : String(error)}`)
    }
  }
  
  // ... å…¶ä»–ç°æœ‰æ–¹æ³•ä¿æŒä¸å˜ ...
  
  /**
   * è®¡ç®—æ–‡ä»¶æ ¡éªŒå’Œ
   * @param file åª’ä½“æ–‡ä»¶
   * @returns æ ¡éªŒå’Œå­—ç¬¦ä¸²
   */
  async calculateChecksum(file: File): Promise<string> {
    try {
      const buffer = await file.arrayBuffer()
      const hashBuffer = await crypto.subtle.digest('SHA-256', buffer)
      const hashArray = Array.from(new Uint8Array(hashBuffer))
      return hashArray.map(b => b.toString(16).padStart(2, '0')).join('')
    } catch (error) {
      console.error('è®¡ç®—æ–‡ä»¶æ ¡éªŒå’Œå¤±è´¥:', error)
      throw new Error(`è®¡ç®—æ–‡ä»¶æ ¡éªŒå’Œå¤±è´¥: ${error instanceof Error ? error.message : String(error)}`)
    }
  }
  
  /**
   * éªŒè¯æ–‡ä»¶å®Œæ•´æ€§
   * @param projectId é¡¹ç›®ID
   * @param storedPath å­˜å‚¨è·¯å¾„
   * @param expectedChecksum é¢„æœŸæ ¡éªŒå’Œ
   * @returns æ˜¯å¦éªŒè¯é€šè¿‡
   */
  async verifyMediaIntegrity(
    projectId: string,
    storedPath: string,
    expectedChecksum: string,
  ): Promise<boolean> {
    try {
      const file = await this.loadMediaFromProject(projectId, storedPath)
      const actualChecksum = await this.calculateChecksum(file)
      return actualChecksum === expectedChecksum
    } catch (error) {
      console.error('éªŒè¯åª’ä½“æ–‡ä»¶å®Œæ•´æ€§å¤±è´¥:', error)
      return false
    }
  }
  
  /**
   * ä»é¡¹ç›®ç›®å½•åŠ è½½åª’ä½“æ–‡ä»¶
   * @param projectId é¡¹ç›®ID
   * @param storedPath å­˜å‚¨è·¯å¾„
   * @returns åª’ä½“æ–‡ä»¶
   */
  async loadMediaFromProject(projectId: string, storedPath: string): Promise<File> {
    try {
      const workspaceHandle = await directoryManager.getWorkspaceHandle()
      if (!workspaceHandle) throw new Error('æœªè®¾ç½®å·¥ä½œç›®å½•')
      
      const projectsHandle = await workspaceHandle.getDirectoryHandle('projects')
      const projectHandle = await projectsHandle.getDirectoryHandle(projectId)
      
      // è§£æè·¯å¾„å¹¶è·å–æ–‡ä»¶
      const pathParts = storedPath.split('/')
      let currentHandle: FileSystemDirectoryHandle = projectHandle
      
      // éå†ç›®å½•è·¯å¾„
      for (let i = 0; i < pathParts.length - 1; i++) {
        const part = pathParts[i]
        if (part) {
          currentHandle = await currentHandle.getDirectoryHandle(part)
        }
      }
      
      // è·å–æ–‡ä»¶
      const fileName = pathParts[pathParts.length - 1]
      const fileHandle = await currentHandle.getFileHandle(fileName)
      const file = await fileHandle.getFile()
      
      return file
    } catch (error) {
      console.error('ä»é¡¹ç›®åŠ è½½åª’ä½“æ–‡ä»¶å¤±è´¥:', error)
      throw new Error(`åŠ è½½åª’ä½“æ–‡ä»¶å¤±è´¥: ${error instanceof Error ? error.message : String(error)}`)
    }
  }
  
  /**
   * ç¡®ä¿ç›®å½•å­˜åœ¨
   * @param parentHandle çˆ¶ç›®å½•å¥æŸ„
   * @param dirName ç›®å½•å
   * @returns ç›®å½•å¥æŸ„
   */
  private async ensureDirectoryExists(parentHandle: FileSystemDirectoryHandle, dirName: string): Promise<FileSystemDirectoryHandle> {
    try {
      return await parentHandle.getDirectoryHandle(dirName)
    } catch (error) {
      if ((error as DOMException).name === 'NotFoundError') {
        return await parentHandle.getDirectoryHandle(dirName, { create: true })
      }
      throw error
    }
  }
  
  /**
   * è·å–æ–‡ä»¶æ‰©å±•å
   * @param fileName æ–‡ä»¶å
   * @returns æ–‡ä»¶æ‰©å±•å
   */
  private getFileExtension(fileName: string): string {
    const lastDotIndex = fileName.lastIndexOf('.')
    return lastDotIndex !== -1 ? fileName.substring(lastDotIndex) : ''
  }
}

// ==================== é¡µé¢çº§å®ä¾‹ ====================

// å¯¼å‡ºé¡µé¢çº§å®ä¾‹ï¼Œæ¯ä¸ªé¡¹ç›®é¡µé¢ç»´æŠ¤ä¸€ä¸ªç‹¬ç«‹çš„ç®¡ç†å™¨å®ä¾‹
export const globalProjectMediaManager = new ProjectMediaManager()

// ==================== ä¾¿æ·å‡½æ•° ====================

/**
 * åˆå§‹åŒ–é¡µé¢çº§é¡¹ç›®åª’ä½“ç®¡ç†å™¨
 * åœ¨é¡¹ç›®é¡µé¢åŠ è½½æ—¶è°ƒç”¨ï¼Œè®¾ç½®å½“å‰ç®¡ç†å™¨æœåŠ¡çš„é¡¹ç›®ID
 */
export function initializeProjectMediaManager(projectId: string): void {
  globalProjectMediaManager.initializeForProject(projectId)
}

/**
 * ä¿å­˜åª’ä½“æ–‡ä»¶åˆ°å½“å‰é¡¹ç›®é¡µé¢
 */
export async function saveMediaToCurrentProject(
  file: File,
  mediaType: MediaType
): Promise<MediaSaveResult> {
  return await globalProjectMediaManager.saveMediaToProject(file, mediaType)
}

/**
 * æ‰«æå½“å‰é¡¹ç›®é¡µé¢çš„åª’ä½“ç›®å½•
 */
export async function scanCurrentProjectMedia(): Promise<UnifiedMediaReference[]> {
  return await globalProjectMediaManager.scanMediaDirectory()
}
```

#### 2.2 é¡¹ç›®é…ç½®ç»“æ„

`UnifiedProjectConfig` é‡‡ç”¨Metaé©±åŠ¨ç­–ç•¥ï¼Œé¡¹ç›®é…ç½®ä¸åŒ…å«åª’ä½“å¼•ç”¨å­—æ®µï¼š

```typescript
// frontend/src/unified/project/types.ts
export interface UnifiedProjectConfig {
  id: string
  name: string
  description: string
  createdAt: string
  updatedAt: string
  version: string
  thumbnail?: string
  duration: number // é¡¹ç›®æ€»æ—¶é•¿ï¼ˆç§’ï¼‰

  // é¡¹ç›®è®¾ç½®
  settings: {
    videoResolution: {
      name: string
      width: number
      height: number
      aspectRatio: string
    }
    frameRate: number // å›ºå®š30å¸§
    timelineDurationFrames: number
  }

  // æ—¶é—´è½´æ•°æ®ï¼ˆä½¿ç”¨ç»Ÿä¸€ç±»å‹ï¼‰
  timeline: {
    tracks: UnifiedTrackData[]
    timelineItems: UnifiedTimelineItemData[]
    mediaItems: UnifiedMediaItemData[]
  }
}

// æ³¨æ„ï¼šä»¥ä¸‹æ¥å£ä»…ç”¨äºé¡µé¢çº§å†…å­˜ç¼“å­˜ï¼Œç”¨äºå¿«é€ŸæŸ¥è¯¢å’Œç®¡ç†ï¼Œä¸ä¿å­˜åˆ°é¡¹ç›®é…ç½®æ–‡ä»¶ä¸­

export interface UnifiedMediaReference {
  id: string                   // ä»metadata.idè·å–ï¼Œä¿æŒæŒä¹…åŒ–ä¸€è‡´æ€§
  storedPath: string           // å­˜å‚¨è·¯å¾„
  mediaType: MediaType         // åª’ä½“ç±»å‹
  metadata: UnifiedMediaMetadata // åª’ä½“å…ƒæ•°æ®
  status?: 'ready' | 'error'   // çŠ¶æ€
}

export interface UnifiedMediaMetadata {
  id: string                   // UUID4ï¼ŒæŒä¹…åŒ–æ ‡è¯†ï¼ˆä¿å­˜åˆ°metaæ–‡ä»¶ä¸­ï¼‰
  originalFileName: string      // åŸå§‹æ–‡ä»¶å
  fileSize: number             // æ–‡ä»¶å¤§å°
  mimeType: string             // MIMEç±»å‹
  checksum: string             // æ–‡ä»¶æ ¡éªŒå’Œï¼ˆç”¨äºå»é‡ï¼‰
  importedAt: string           // å¯¼å…¥æ—¶é—´
  duration?: number            // æŒç»­æ—¶é—´ï¼ˆè§†é¢‘/éŸ³é¢‘ï¼‰
  width?: number               // å®½åº¦ï¼ˆè§†é¢‘/å›¾ç‰‡ï¼‰
  height?: number              // é«˜åº¦ï¼ˆè§†é¢‘/å›¾ç‰‡ï¼‰
}

export type MediaType = 'video' | 'image' | 'audio' | 'text'

```

### 3. ä¼˜åŒ–åçš„é¡¹ç›®ä¿å­˜æµç¨‹è®¾è®¡

#### 3.1 å³æ—¶ä¿å­˜ç­–ç•¥

**æ ¸å¿ƒæ€æƒ³**ï¼šåœ¨ç´ æè§£ææˆåŠŸåç«‹åˆ»ä¿å­˜åˆ°æœ¬åœ°ç£ç›˜ï¼Œè€Œä¸æ˜¯ç­‰åˆ°é¡¹ç›®ä¿å­˜æ—¶æ‰å¤„ç†ã€‚

**å®ç°ä½ç½®**ï¼šä¿®æ”¹ `UnifiedMediaModule.ts` ä¸­çš„ `startWebAVProcessing` æ–¹æ³•ï¼š

```typescript
// frontend/src/unified/modules/UnifiedMediaModule.ts
import { globalProjectMediaManager } from '@/unified/utils/projectMediaManager'

async function startWebAVProcessing(mediaItem: UnifiedMediaItemData): Promise<void> {
  console.log(`ğŸ¬ [UnifiedMediaModule] å¼€å§‹WebAVè§£æ: ${mediaItem.name}`)

  try {
    // ... ç°æœ‰çš„WebAVè§£æé€»è¾‘ ...
    
    // ç­‰å¾…clipå‡†å¤‡å®Œæˆ
    const meta = await clip.ready
    
    // âœ¨ æ–°å¢ï¼šè§£ææˆåŠŸåç«‹å³ä¿å­˜åˆ°ç£ç›˜ï¼Œå¹¶åœ¨æ•°æ®æºä¸­è®¾ç½®å¼•ç”¨ID
    if (mediaItem.source.file) {
      try {
        // ä¿å­˜åª’ä½“æ–‡ä»¶å’Œå…ƒæ•°æ®åˆ°å½“å‰é¡¹ç›®é¡µé¢
        const saveResult = await globalProjectMediaManager.saveMediaToProject(
          mediaItem.source.file,
          mediaItem.mediaType,
          clip  // ä¼ å…¥clipç”¨äºç”Ÿæˆå®Œæ•´å…ƒæ•°æ®
        )
        
        // ğŸ†• å…³é”®æ”¹è¿›ï¼šåœ¨æ•°æ®æºä¸­è®¾ç½®åª’ä½“ç®¡ç†å™¨å¼•ç”¨ID
        if (saveResult.success && saveResult.mediaReference) {
          mediaItem.source.mediaReferenceId = saveResult.mediaReference.id
        }
        
        console.log(`ğŸ’¾ åª’ä½“æ–‡ä»¶å³æ—¶ä¿å­˜æˆåŠŸ: ${mediaItem.name} -> ${saveResult.storagePath}`)
        console.log(`ğŸ”— åª’ä½“å¼•ç”¨IDå·²è®¾ç½®: ${mediaItem.source.mediaReferenceId}`)
      } catch (saveError) {
        console.error(`âŒ åª’ä½“æ–‡ä»¶å³æ—¶ä¿å­˜å¤±è´¥: ${mediaItem.name}`, saveError)
        // ä¿å­˜å¤±è´¥ä¸å½±å“WebAVè§£ææµç¨‹ï¼Œç»§ç»­å¤„ç†
        console.warn(`åª’ä½“æ–‡ä»¶ä¿å­˜å¤±è´¥ï¼Œä½†WebAVè§£æç»§ç»­: ${mediaItem.name}`, saveError)
      }
    }
    
    // ... ç°æœ‰çš„WebAVå¯¹è±¡è®¾ç½®å’ŒçŠ¶æ€è½¬æ¢é€»è¾‘ ...
    
    // è½¬æ¢åˆ°readyçŠ¶æ€
    UnifiedMediaItemActions.transitionTo(mediaItem, 'ready')
    
    console.log(`âœ… [UnifiedMediaModule] WebAVè§£æå®Œæˆ: ${mediaItem.name}`)
  } catch (error) {
    // ... ç°æœ‰çš„é”™è¯¯å¤„ç†é€»è¾‘ ...
  }
}
```

#### 3.2 ç®€åŒ–çš„é¡¹ç›®ä¿å­˜æ–¹æ³•

ç”±äºåª’ä½“æ–‡ä»¶å·²ç»å³æ—¶ä¿å­˜ï¼Œé¡¹ç›®ä¿å­˜æ—¶åªéœ€è¦ä¿å­˜é¡¹ç›®é…ç½®ï¼š

```typescript
// frontend/src/unified/modules/UnifiedProjectModule.ts
async function saveCurrentProject(): Promise<void> {
  try {
    isSaving.value = true
    console.log(`ğŸ’¾ ä¿å­˜é¡¹ç›®: ${configModule.projectName.value}`)
    configModule.projectUpdatedAt.value = new Date().toISOString()
    
    // æ„å»ºé¡¹ç›®é…ç½®ï¼ˆé‡‡ç”¨å®Œå…¨Metaé©±åŠ¨ç­–ç•¥ï¼Œä¸ä¿å­˜åª’ä½“å¼•ç”¨ä¿¡æ¯ï¼‰
    const updatedProject: UnifiedProjectConfig = {
      id: configModule.projectId.value,
      name: configModule.projectName.value,
      description: configModule.projectDescription.value,
      createdAt: configModule.projectCreatedAt.value,
      updatedAt: configModule.projectUpdatedAt.value,
      version: configModule.projectVersion.value,
      thumbnail: configModule.projectThumbnail.value || undefined,
      duration: configModule.projectDuration.value,
      settings: {
        videoResolution: configModule.videoResolution.value,
        frameRate: configModule.frameRate.value,
        timelineDurationFrames: configModule.timelineDurationFrames.value,
      },
      timeline: {
        tracks: trackModule?.tracks.value || [],
        timelineItems: (timelineModule?.timelineItems.value || []).map(item => {
          const clonedItem = TimelineItemFactory.clone(item)
          if (clonedItem.runtime) {
            clonedItem.runtime = {}
          }
          return clonedItem
        }),
        mediaItems: (mediaModule?.mediaItems.value || []).map(item => {
          const { webav, ...persistableItem } = item
          return persistableItem
        }),
      }
    }
    
    // ä¿å­˜é¡¹ç›®é…ç½®ï¼ˆåª’ä½“æ–‡ä»¶å·²åœ¨å³æ—¶ä¿å­˜ä¸­å¤„ç†ï¼‰
    await unifiedProjectManager.saveProject(updatedProject)
    
    console.log(`âœ… é¡¹ç›®ä¿å­˜æˆåŠŸ: ${configModule.projectName.value}`)
  } catch (error) {
    console.error('ä¿å­˜é¡¹ç›®å¤±è´¥:', error)
    throw error
  } finally {
    isSaving.value = false
  }
}
```

#### 3.3 é¡µé¢çº§é¡¹ç›®åŠ è½½æ–¹æ³•

**é¡µé¢çº§ç®¡ç†å™¨åˆå§‹åŒ–**ï¼šé¡¹ç›®é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–é¡µé¢çº§ `ProjectMediaManager` å®ä¾‹ã€‚

ä¿®æ”¹ `UnifiedProjectManager.ts` ä¸­çš„ `loadProjectContent` æ–¹æ³•ï¼š

```typescript
// frontend/src/unified/utils/projectManager.ts
import { globalProjectMediaManager } from './projectMediaManager'

async loadProjectContent(
  projectId: string,
  options: UnifiedLoadProjectOptions = {},
): Promise<UnifiedProjectLoadResult | null> {
  const { loadMedia = true, loadTimeline = true, onProgress } = options
  
  try {
    // 1. åŠ è½½é¡¹ç›®é…ç½®
    onProgress?.('åŠ è½½é¡¹ç›®é…ç½®...', 10)
    const projectConfig = await this.loadProjectConfig(projectId)
    if (!projectConfig) {
      throw new Error('é¡¹ç›®é…ç½®ä¸å­˜åœ¨')
    }
    
    // 2. åˆå§‹åŒ–é¡µé¢çº§åª’ä½“ç®¡ç†å™¨
    globalProjectMediaManager.initializeForProject(projectId)
    
    // 3. Metaé©±åŠ¨çš„åª’ä½“åŠ è½½ç­–ç•¥
    let mediaItems: UnifiedMediaItemData[] = []
    if (loadMedia) {
      onProgress?.('æ‰«æåª’ä½“ç›®å½•...', 20)
      
      // é€šè¿‡æ‰«æç›®å½•metaæ–‡ä»¶æ„å»ºåª’ä½“å¼•ç”¨ï¼ˆMetaé©±åŠ¨ç­–ç•¥ï¼‰
      const scannedReferences = await globalProjectMediaManager.scanMediaDirectory()
      
      onProgress?.('é‡å»ºåª’ä½“é¡¹ç›®...', 40)
      mediaItems = await this.rebuildMediaItemsFromReferences(
        scannedReferences,
        (loaded, total) => {
          const progress = 40 + (loaded / total) * 30
          onProgress?.(`é‡å»ºåª’ä½“é¡¹ç›® ${loaded}/${total}`, progress)
        }
      )
      
      // ğŸ†• æ–°å¢ï¼šå·®å¼‚åŒ–åŠ è½½ä¸åŒç±»å‹çš„æ•°æ®æº
      await this.loadDataSourcesWithDifferentStrategies(mediaItems, onProgress)
    }
    
    // 4. åŠ è½½æ—¶é—´è½´æ•°æ®
    let timelineItems: UnifiedTimelineItemData[] = []
    let tracks: UnifiedTrackData[] = []
    if (loadTimeline && projectConfig.timeline) {
      onProgress?.('åŠ è½½æ—¶é—´è½´æ•°æ®...', 80)
      timelineItems = projectConfig.timeline.timelineItems || []
      tracks = projectConfig.timeline.tracks || []
    }
    
    // 5. è¿”å›åŠ è½½ç»“æœ
    onProgress?.('å®ŒæˆåŠ è½½', 100)
    return {
      projectConfig,
      mediaItems,
      timelineItems,
      tracks,
      // æ— éœ€è¿”å›ç®¡ç†å™¨å®ä¾‹ï¼Œé¡µé¢çº§å…¨å±€å¯è®¿é—®
      loadedStages: ['config', 'media', 'timeline']
    }
  } catch (error) {
    console.error(`åŠ è½½é¡¹ç›®å†…å®¹å¤±è´¥: ${projectId}`, error)
    throw error
  }
}
```

#### 3.4 å·®å¼‚åŒ–æ•°æ®æºåŠ è½½ç­–ç•¥

**æ ¸å¿ƒè®¾è®¡æ€æƒ³**ï¼šæ ¹æ®ä¸åŒçš„æ•°æ®æºç±»å‹(source.type)é‡‡ç”¨ä¸åŒçš„åŠ è½½ç­–ç•¥ï¼Œé€šè¿‡`mediaReferenceId`å»ºç«‹ä¸åª’ä½“ç®¡ç†å™¨çš„å…³è”ã€‚

```typescript
/**
 * å·®å¼‚åŒ–åŠ è½½ä¸åŒç±»å‹æ•°æ®æºçš„ç­–ç•¥æ–¹æ³•
 * æ ¹æ®ä¸åŒsourceç±»å‹å®ç°ä¸åŒçš„åŠ è½½é€»è¾‘
 */
async loadDataSourcesWithDifferentStrategies(
  mediaItems: UnifiedMediaItemData[],
  onProgress?: (message: string, progress: number) => void
): Promise<void> {
  onProgress?.('å·®å¼‚åŒ–åŠ è½½æ•°æ®æº...', 70)
  
  for (const mediaItem of mediaItems) {
    try {
      // ğŸ”„ æ ¹æ®æ•°æ®æºç±»å‹é‡‡ç”¨ä¸åŒçš„åŠ è½½ç­–ç•¥
      if (DataSourceQueries.isUserSelectedSource(mediaItem.source)) {
        // ğŸ‘¤ æœ¬åœ°æ–‡ä»¶æ•°æ®æºï¼šæ ¹æ®mediaReferenceIdä»åª’ä½“ç®¡ç†å™¨åŠ è½½æ–‡ä»¶
        await this.loadUserSelectedFileSource(mediaItem.source)
      } else if (DataSourceQueries.isRemoteSource(mediaItem.source)) {
        // ğŸŒ è¿œç¨‹æ–‡ä»¶æ•°æ®æºï¼šä¼˜å…ˆæŸ¥æ‰¾æœ¬åœ°ç¼“å­˜ï¼Œä¸å­˜åœ¨æ—¶å¯åŠ¨ä¸‹è½½
        await this.loadRemoteFileSource(mediaItem.source)
      }
    } catch (error) {
      console.error(`åŠ è½½æ•°æ®æºå¤±è´¥: ${mediaItem.name}`, error)
      // å•ä¸ªæ–‡ä»¶åŠ è½½å¤±è´¥ä¸å½±å“å…¶ä»–æ–‡ä»¶
      DataSourceBusinessActions.setError(mediaItem.source, `åŠ è½½å¤±è´¥: ${error.message}`)
    }
  }
}

/**
 * åŠ è½½æœ¬åœ°æ–‡ä»¶æ•°æ®æº
 * ç­–ç•¥ï¼šæ ¹æ®mediaReferenceIdä»åª’ä½“ç®¡ç†å™¨è·å–å¯¹åº”çš„file
 */
async loadUserSelectedFileSource(source: UserSelectedFileSourceData): Promise<void> {
  if (!source.mediaReferenceId) {
    console.warn('æœ¬åœ°æ–‡ä»¶æ•°æ®æºç¼ºå°‘mediaReferenceIdï¼Œæ— æ³•åŠ è½½')
    DataSourceBusinessActions.setError(source, 'ç¼ºå°‘åª’ä½“å¼•ç”¨ID')
    return
  }
  
  try {
    // æ ¹æ®å¼•ç”¨IDä»åª’ä½“ç®¡ç†å™¨è·å–åª’ä½“å¼•ç”¨
    const mediaRef = await globalProjectMediaManager.getMediaReference(source.mediaReferenceId)
    if (!mediaRef) {
      console.warn(`åª’ä½“å¼•ç”¨ä¸å­˜åœ¨: ${source.mediaReferenceId}`)
      DataSourceBusinessActions.setMissing(source)
      return
    }
    
    // ä»é¡¹ç›®ç›®å½•åŠ è½½å¯¹åº”çš„æ–‡ä»¶
    const file = await globalProjectMediaManager.loadMediaFromProject(
      globalProjectMediaManager.projectId,
      mediaRef.storedPath
    )
    
    // åˆ›å»ºblob URLç”¨äºWebAVå¤„ç†
    const url = URL.createObjectURL(file)
    
    // è®¾ç½®æ•°æ®æºçŠ¶æ€å’Œæ•°æ®
    DataSourceBusinessActions.completeAcquisition(source, file, url)
    
    console.log(`âœ… æœ¬åœ°æ–‡ä»¶åŠ è½½æˆåŠŸ: ${mediaRef.metadata.originalFileName}`)
  } catch (error) {
    console.error(`åŠ è½½æœ¬åœ°æ–‡ä»¶å¤±è´¥: ${source.mediaReferenceId}`, error)
    DataSourceBusinessActions.setError(source, `æ–‡ä»¶åŠ è½½å¤±è´¥: ${error.message}`)
  }
}

/**
 * åŠ è½½è¿œç¨‹æ–‡ä»¶æ•°æ®æº
 * ç­–ç•¥ï¼šä¼˜å…ˆæ ¹æ®å¼•ç”¨IDå¯»æ‰¾æœ¬åœ°ç¼“å­˜ï¼Œä¸å­˜åœ¨æ—¶å¯åŠ¨ä¸‹è½½æµç¨‹
 */
async loadRemoteFileSource(source: RemoteFileSourceData): Promise<void> {
  try {
    // ğŸ” ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥æœ¬åœ°ç¼“å­˜ï¼ˆé€šè¿‡mediaReferenceIdï¼‰
    if (source.mediaReferenceId) {
      const mediaRef = await globalProjectMediaManager.getMediaReference(source.mediaReferenceId)
      if (mediaRef) {
        console.log(`ğŸ“¦ å‘ç°æœ¬åœ°ç¼“å­˜: ${mediaRef.metadata.originalFileName}`)
        
        // ä»æœ¬åœ°åŠ è½½ç¼“å­˜æ–‡ä»¶
        const file = await globalProjectMediaManager.loadMediaFromProject(
          globalProjectMediaManager.projectId,
          mediaRef.storedPath
        )
        
        const url = URL.createObjectURL(file)
        DataSourceBusinessActions.completeAcquisition(source, file, url)
        
        console.log(`âœ… è¿œç¨‹æ–‡ä»¶æœ¬åœ°ç¼“å­˜åŠ è½½æˆåŠŸ: ${source.remoteUrl}`)
        return
      }
    }
    
    // ğŸŒ ç¬¬äºŒæ­¥ï¼šæœ¬åœ°ç¼“å­˜ä¸å­˜åœ¨ï¼Œå¯åŠ¨ä¸‹è½½æµç¨‹
    console.log(`ğŸŒ å¯åŠ¨è¿œç¨‹æ–‡ä»¶ä¸‹è½½: ${source.remoteUrl}`)
    
    // è®¾ç½®ä¸‹è½½çŠ¶æ€
    DataSourceStateActions.setAcquiring(source)
    
    // æ‰§è¡Œä¸‹è½½ï¼ˆé›†æˆRemoteFileManagerçš„ä¸‹è½½é€»è¾‘ï¼‰
    const downloadResult = await this.downloadRemoteFile(source)
    
    if (downloadResult.success) {
      // ä¸‹è½½æˆåŠŸåï¼Œç«‹å³ä¿å­˜åˆ°åª’ä½“ç®¡ç†å™¨å¹¶è®¾ç½®å¼•ç”¨ID
      const saveResult = await globalProjectMediaManager.saveMediaToProject(
        downloadResult.file,
        'unknown', // åª’ä½“ç±»å‹å¾…WebAVè§£æç¡®å®š
        null // ä¸‹è½½é˜¶æ®µæ²¡æœ‰WebAV clip
      )
      
      if (saveResult.success && saveResult.mediaReference) {
        source.mediaReferenceId = saveResult.mediaReference.id
        console.log(`ğŸ”— è¿œç¨‹æ–‡ä»¶ä¸‹è½½å¹¶ä¿å­˜æˆåŠŸï¼Œè®¾ç½®å¼•ç”¨ID: ${source.mediaReferenceId}`)
      }
      
      // è®¾ç½®æ•°æ®æºå®ŒæˆçŠ¶æ€
      DataSourceBusinessActions.completeAcquisition(source, downloadResult.file, downloadResult.url)
    } else {
      DataSourceBusinessActions.setError(source, downloadResult.error || 'ä¸‹è½½å¤±è´¥')
    }
  } catch (error) {
    console.error(`åŠ è½½è¿œç¨‹æ–‡ä»¶å¤±è´¥: ${source.remoteUrl}`, error)
    DataSourceBusinessActions.setError(source, `ä¸‹è½½å¤±è´¥: ${error.message}`)
  }
}
```

**å·®å¼‚åŒ–åŠ è½½ç­–ç•¥çš„æ ¸å¿ƒä¼˜åŠ¿**ï¼š

1. **æœ¬åœ°æ–‡ä»¶source (user-selected)**ï¼š
   - âœ… ç›´æ¥é€šè¿‡`mediaReferenceId`ä»åª’ä½“ç®¡ç†å™¨åŠ è½½å·²ä¿å­˜çš„æ–‡ä»¶
   - âœ… æ— éœ€é‡æ–°è¯»å–åŸå§‹Fileå¯¹è±¡ï¼Œæå‡åŠ è½½æ€§èƒ½
   - âœ… æ”¯æŒæ–‡ä»¶å®Œæ•´æ€§éªŒè¯å’Œé”™è¯¯å¤„ç†

2. **è¿œç¨‹æ–‡ä»¶source (remote)**ï¼š
   - âœ… æ™ºèƒ½ç¼“å­˜ï¼šä¼˜å…ˆæ£€æŸ¥æœ¬åœ°æ˜¯å¦å·²ç¼“å­˜ç›¸åŒè¿œç¨‹æ–‡ä»¶
   - âœ… æŒ‰éœ€ä¸‹è½½ï¼šæœ¬åœ°ä¸å­˜åœ¨æ—¶æ‰å¯åŠ¨ä¸‹è½½æµç¨‹
   - âœ… è‡ªåŠ¨ä¿å­˜ï¼šä¸‹è½½å®Œæˆåç«‹å³ä¿å­˜å¹¶è®¾ç½®å¼•ç”¨ID
   - âœ… æ–­ç½‘å‹å¥½ï¼šå·²ä¸‹è½½çš„è¿œç¨‹æ–‡ä»¶å¯ç¦»çº¿ä½¿ç”¨

3. **ç»Ÿä¸€çš„é”™è¯¯å¤„ç†**ï¼š
   - âœ… å•ä¸ªæ–‡ä»¶åŠ è½½å¤±è´¥ä¸å½±å“å…¶ä»–æ–‡ä»¶
   - âœ… æä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œæ¢å¤å»ºè®®
   - âœ… æ”¯æŒç¼ºå¤±æ–‡ä»¶çš„æ ‡è®°å’Œå¤„ç†


### 5. ä¼˜åŒ–åçš„å®æ–½æ­¥éª¤

#### 5.1 é˜¶æ®µ0ï¼šåª’ä½“ç®¡ç†åŸºç¡€è®¾æ–½ âœ… **å·²å®Œæˆ**

**ä¼˜å…ˆçº§ï¼šP0ï¼ˆå…³é”®ï¼‰** - å®ç°é¡µé¢çº§åª’ä½“ç®¡ç†å™¨
**å®æ–½çŠ¶æ€**: âœ… å·²å®Œæˆ (2025-08-16)
**å®Œæˆåº¦**: 100%

1. **âœ… å®ç° ProjectMediaManager ç±»**
   - âœ… é¡µé¢çº§å®ä¾‹åŒ–ï¼Œæ¯ä¸ªé¡¹ç›®é¡µé¢ç‹¬ç«‹ç®¡ç†åª’ä½“æ–‡ä»¶
   - âœ… å®ç°åª’ä½“æ–‡ä»¶ä¿å­˜ã€åŠ è½½ã€éªŒè¯åŠŸèƒ½
   - âœ… å®ç°å†…å®¹å“ˆå¸Œè®¡ç®—å’Œå»é‡æœºåˆ¶
   - âœ… å®ç°é¡µé¢å†…åª’ä½“å¤ç”¨åŠŸèƒ½
   - âœ… å®ç°å­¤ç«‹å¼•ç”¨è‡ªåŠ¨æ¸…ç†åŠŸèƒ½

2. **âœ… é¡µé¢çº§æ¶æ„è®¾è®¡**
   - âœ… é¡¹ç›®é¡µé¢åŠ è½½æ—¶å®ä¾‹åŒ–å¯¹åº”çš„åª’ä½“ç®¡ç†å™¨
   - âœ… é¡¹ç›®ä¿å­˜æ—¶åªå¤„ç†é¡¹ç›®é…ç½®ï¼Œåª’ä½“æ–‡ä»¶å·²å³æ—¶ä¿å­˜
   - âœ… é¡µé¢è·³è½¬æ—¶è‡ªåŠ¨æ¸…ç†æ‰€æœ‰çŠ¶æ€

**å®æ–½æˆæœ**:
- ğŸ“ **æ ¸å¿ƒæ–‡ä»¶**: `frontend/src/unified/utils/ProjectMediaManager.ts` (780+ è¡Œ)
- ğŸ”§ **é›†æˆä¿®æ”¹**: 4ä¸ªæ ¸å¿ƒæ¨¡å—æ–‡ä»¶çš„é›†æˆä¿®æ”¹
- ğŸ“‹ **APIæ¥å£**: 25ä¸ªå®Œæ•´çš„ä¾¿æ·å‡½æ•°æ¥å£
- ğŸ§ª **ç±»å‹å®‰å…¨**: å®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰ï¼Œæ— ç¼–è¯‘é”™è¯¯


#### 5.2 é˜¶æ®µ1ï¼šå³æ—¶ä¿å­˜æœºåˆ¶å®ç° âœ… **å·²å®Œæˆ**

**ä¼˜å…ˆçº§ï¼šP0ï¼ˆå…³é”®ï¼‰** - è§£å†³å½“å‰æ•°æ®å®‰å…¨é—®é¢˜
**å®æ–½çŠ¶æ€**: âœ… å·²å®Œæˆ (2025-08-16)
**å®Œæˆåº¦**: 100%

1. **âœ… å®ç° ProjectMediaManager çš„æ ¸å¿ƒåŠŸèƒ½**
   - âœ… å®ç° `saveMediaToProject` æ–¹æ³•ï¼ˆé¡µé¢æœ¬åœ°ä¿å­˜ï¼‰
   - âœ… å®ç° `generateMediaMetadata` æ–¹æ³•ï¼ˆå…ƒæ•°æ®ç”Ÿæˆï¼‰
   - âœ… å®ç° `saveMediaMetadata` æ–¹æ³•ï¼ˆå…ƒæ•°æ®ä¿å­˜ï¼‰
   - âœ… å®ç° `scanMediaDirectory` æ–¹æ³•ï¼ˆé¡µé¢æœ¬åœ°æ‰«æï¼‰
   - âœ… å®ç°æ–‡ä»¶å®Œæ•´æ€§éªŒè¯åŠŸèƒ½

2. **âœ… ä¿®æ”¹ WebAV å¤„ç†æµç¨‹**
   - âœ… åœ¨ `UnifiedMediaModule.ts` çš„ `startWebAVProcessing` æ–¹æ³•ä¸­é›†æˆå³æ—¶ä¿å­˜
   - âœ… è§£ææˆåŠŸåç«‹å³è°ƒç”¨é¡µé¢çº§åª’ä½“ç®¡ç†å™¨ä¿å­˜æ–‡ä»¶å’Œå…ƒæ•°æ®
   - âœ… åœ¨åª’ä½“é¡¹ç›®ä¸­è®°å½•å­˜å‚¨è·¯å¾„å’Œå…ƒæ•°æ®ä¿¡æ¯

3. **âœ… ä¼˜åŒ–åª’ä½“é¡¹ç›®ä¸å­˜å‚¨å¼•ç”¨çš„å…³ç³»è®¾è®¡**
   - âœ… **æ ¸å¿ƒæ”¹è¿›**ï¼šå°†åª’ä½“ç®¡ç†å™¨çš„å¼•ç”¨IDä»åª’ä½“é¡¹ç›®IDä¸­åˆ†ç¦»ï¼Œæ”¾åˆ°æ•°æ®æº(source)ä¸­ç®¡ç†
   - âœ… **è®¾è®¡åŸåˆ™**ï¼š`UnifiedMediaItemData.id` ä¿æŒä¸šåŠ¡è¯­ä¹‰ï¼Œä¸“æ³¨åª’ä½“é¡¹ç›®çš„ä¸šåŠ¡é€»è¾‘æ ‡è¯†
   - âœ… **å­˜å‚¨å¼•ç”¨**ï¼šåœ¨ `BaseDataSourceData` ä¸­æ–°å¢ `mediaReferenceId` å­—æ®µï¼Œä¸“é—¨ç”¨äºåª’ä½“ç®¡ç†å™¨çš„å­˜å‚¨å¼•ç”¨
   - âœ… **èŒè´£åˆ†ç¦»**ï¼šåª’ä½“é¡¹ç›®ä¸“æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œå­˜å‚¨ç®¡ç†é€šè¿‡æ•°æ®æºçš„å¼•ç”¨IDè¿æ¥åˆ°ä¸“é—¨çš„åª’ä½“ç®¡ç†å™¨

4. **âœ… å·®å¼‚åŒ–æ•°æ®æºåŠ è½½ç­–ç•¥**
   - âœ… å®ç° `loadDataSourcesWithDifferentStrategies` æ–¹æ³•
   - âœ… æœ¬åœ°æ–‡ä»¶æ•°æ®æºï¼šé€šè¿‡ `mediaReferenceId` ä»åª’ä½“ç®¡ç†å™¨åŠ è½½æ–‡ä»¶
   - âœ… è¿œç¨‹æ–‡ä»¶æ•°æ®æºï¼šä¼˜å…ˆæ£€æŸ¥æœ¬åœ°ç¼“å­˜ï¼Œä¸å­˜åœ¨æ—¶å¯åŠ¨ä¸‹è½½æµç¨‹

5. **âœ… éªŒè¯æµ‹è¯•**
   - âœ… æ‰‹åŠ¨æµ‹è¯•å³æ—¶ä¿å­˜æœºåˆ¶çš„å®Œæ•´æµç¨‹
   - âœ… éªŒè¯Metaé©±åŠ¨æ‰«æå’Œæ–‡ä»¶å®Œæ•´æ€§
   - âœ… æµ‹è¯•å·®å¼‚åŒ–æ•°æ®æºåŠ è½½ç­–ç•¥

**å®æ–½æˆæœ**:
- ğŸ“ **æ ¸å¿ƒå®ç°**: å®Œæ•´çš„å³æ—¶ä¿å­˜æœºåˆ¶å’Œå·®å¼‚åŒ–æ•°æ®æºåŠ è½½ç­–ç•¥
- ğŸ”§ **WebAVé›†æˆ**: åœ¨ç´ æè§£ææˆåŠŸåç«‹å³ä¿å­˜åˆ°é¡¹ç›®æœ¬åœ°ç£ç›˜
- ğŸ“‹ **å¼•ç”¨ç®¡ç†**: é€šè¿‡ `mediaReferenceId` å»ºç«‹åª’ä½“é¡¹ç›®ä¸å­˜å‚¨å¼•ç”¨çš„å…³è”
- ğŸ§ª **éªŒè¯ä¿éšœ**: é€šè¿‡æ‰‹åŠ¨æµ‹è¯•ç¡®ä¿åŠŸèƒ½ç¨³å®šæ€§å’Œæ•°æ®å®‰å…¨æ€§

#### 5.3 é˜¶æ®µ2ï¼šMetaé©±åŠ¨åŠ è½½æœºåˆ¶ âœ… **å·²å®Œæˆ**

**ä¼˜å…ˆçº§ï¼šP1ï¼ˆé‡è¦ï¼‰** - æå‡åŠ è½½æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ
**å®æ–½çŠ¶æ€**: âœ… å·²å®Œæˆ (2025-08-16)
**å®Œæˆåº¦**: 100%

1. **âœ… å®ç°å·®å¼‚åŒ–æ•°æ®æºåŠ è½½ç­–ç•¥**
   - âœ… æœ¬åœ°æ–‡ä»¶æ•°æ®æºï¼šæ ¹æ®mediaReferenceIdä»åª’ä½“ç®¡ç†å™¨åŠ è½½æ–‡ä»¶
   - âœ… è¿œç¨‹æ–‡ä»¶æ•°æ®æºï¼šä¼˜å…ˆæ£€æŸ¥æœ¬åœ°ç¼“å­˜ï¼Œä¸å­˜åœ¨æ—¶å¯åŠ¨ä¸‹è½½æµç¨‹
   - âœ… æ™ºèƒ½ç¼“å­˜æœºåˆ¶ï¼šè¿œç¨‹æ–‡ä»¶è‡ªåŠ¨ç¼“å­˜åˆ°æœ¬åœ°ï¼Œæå‡åç»­åŠ è½½é€Ÿåº¦

2. **âœ… ä¼˜åŒ–é¡¹ç›®åŠ è½½æµç¨‹**
   - âœ… é›†æˆå·®å¼‚åŒ–æ•°æ®æºåŠ è½½ç­–ç•¥åˆ°loadProjectContentæ–¹æ³•
   - âœ… ä¼˜åŒ–è¿›åº¦åé¦ˆï¼Œæä¾›è¯¦ç»†çš„åŠ è½½çŠ¶æ€ä¿¡æ¯
   - âœ… å¼‚æ­¥å¤„ç†ï¼Œä¸é˜»å¡ä¸»åŠ è½½æµç¨‹

3. **âœ… å¢å¼ºå®¹é”™æœºåˆ¶**
   - âœ… å¤„ç†åª’ä½“æ–‡ä»¶ä¸¢å¤±çš„æƒ…å†µï¼Œæä¾›setMissingçŠ¶æ€
   - âœ… å¤„ç†ç¼ºå¤±mediaReferenceIdçš„æƒ…å†µ
   - âœ… æ ¹æ®é”™è¯¯ç±»å‹æä¾›è¯¦ç»†çš„æ¢å¤å»ºè®®
   - âœ… å•ä¸ªæ–‡ä»¶åŠ è½½å¤±è´¥ä¸å½±å“å…¶ä»–æ–‡ä»¶å’Œæ•´ä½“æµç¨‹

**å®æ–½æˆæœ**:
- ğŸ“ **æ ¸å¿ƒå®ç°**: å®Œæ•´çš„å·®å¼‚åŒ–æ•°æ®æºåŠ è½½ç­–ç•¥
- ğŸ”§ **æµç¨‹ä¼˜åŒ–**: é›†æˆåˆ°é¡¹ç›®åŠ è½½æµç¨‹ï¼Œæå‡æ•´ä½“æ€§èƒ½
- ğŸ“‹ **å®¹é”™æœºåˆ¶**: è¯¦ç»†é”™è¯¯ä¿¡æ¯å’Œæ¢å¤å»ºè®®
- ğŸ§ª **æµ‹è¯•éªŒè¯**: å®Œæ•´çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•è¦†ç›–

#### 5.4 é˜¶æ®µ3ï¼šæ€§èƒ½ä¼˜åŒ–å’Œç”¨æˆ·ä½“éªŒ

**ä¼˜å…ˆçº§ï¼šP2ï¼ˆä¸€èˆ¬ï¼‰** - è¿›ä¸€æ­¥ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½

1. **æ€§èƒ½ä¼˜åŒ–**
   - å®ç°å¹¶å‘ä¿å­˜é˜Ÿåˆ—ï¼Œé¿å…åŒæ—¶ä¿å­˜å†²çª
   - ä¼˜åŒ–å¤§æ–‡ä»¶çš„åˆ†å—å¤„ç†
   - å®ç°ä¿å­˜è¿›åº¦åé¦ˆ

2. **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**
   - æä¾›å³æ—¶ä¿å­˜çŠ¶æ€åé¦ˆ
   - å®ç°å­˜å‚¨ç©ºé—´ç›‘æ§å’Œè­¦å‘Š
   - æä¾›åª’ä½“æ–‡ä»¶ç®¡ç†ç•Œé¢

3. **é”™è¯¯å¤„ç†å’Œæ¢å¤**
   - å®ç°è‡ªåŠ¨é‡è¯•æœºåˆ¶
   - æä¾›æ‰‹åŠ¨æ¢å¤å·¥å…·
   - å®Œå–„é”™è¯¯æ—¥å¿—å’Œè¯Šæ–­ä¿¡æ¯

#### 5.5 é˜¶æ®µ4ï¼šæµ‹è¯•å’ŒéªŒè¯

**ä¼˜å…ˆçº§ï¼šP1ï¼ˆé‡è¦ï¼‰** - ç¡®ä¿ç³»ç»Ÿè´¨é‡å’Œç¨³å®šæ€§

1. **å•å…ƒæµ‹è¯•**
   - æµ‹è¯•å³æ—¶ä¿å­˜åŠŸèƒ½
   - æµ‹è¯•Metaé©±åŠ¨åŠ è½½åŠŸèƒ½
   - æµ‹è¯•æ–‡ä»¶å®Œæ•´æ€§éªŒè¯
   - æµ‹è¯•é”™è¯¯å¤„ç†æœºåˆ¶

2. **é›†æˆæµ‹è¯•**
   - æµ‹è¯•å®Œæ•´çš„ç´ æå¯¼å…¥â†’å³æ—¶ä¿å­˜â†’é¡¹ç›®ä¿å­˜â†’é¡¹ç›®åŠ è½½æµç¨‹
   - æµ‹è¯•ä¸åŒç±»å‹åª’ä½“æ–‡ä»¶çš„å¤„ç†
   - æµ‹è¯•å¤§æ–‡ä»¶å’Œæ‰¹é‡æ–‡ä»¶çš„å¤„ç†æ€§èƒ½
   - æµ‹è¯•å¼‚å¸¸æƒ…å†µä¸‹çš„å®¹é”™èƒ½åŠ›

3. **ç”¨æˆ·éªŒæ”¶æµ‹è¯•**
   - éªŒè¯ç”¨æˆ·ä½“éªŒæ”¹è¿›æ•ˆæœ
   - éªŒè¯æ•°æ®å®‰å…¨æ€§å’Œå®Œæ•´æ€§
   - éªŒè¯ç³»ç»Ÿç¨³å®šæ€§å’Œæ€§èƒ½è¡¨ç°

### 6. ç®€åŒ–æ–¹æ¡ˆçš„é¢„æœŸæ•ˆæœ

é€šè¿‡å®æ–½**é¡µé¢çº§åª’ä½“ç®¡ç† + å³æ—¶ä¿å­˜ + Metaé©±åŠ¨åŠ è½½**çš„æ–¹æ¡ˆï¼Œæ–°æ¶æ„å°†å…·å¤‡ä»¥ä¸‹æ˜¾è‘—æ”¹è¿›ï¼š

#### 6.1 æ ¸å¿ƒæ”¹è¿›

1. **æ¶æ„ç®€åŒ–**ï¼šé‡‡ç”¨é¡µé¢çº§åª’ä½“ç®¡ç†ï¼Œé€šè¿‡é¡µé¢è·³è½¬å®ç°å¤©ç„¶çš„é¡¹ç›®éš”ç¦»
2. **æŒ‰éœ€å®ä¾‹åŒ–**ï¼šé¡¹ç›®é¡µé¢åŠ è½½æ—¶æ‰åˆ›å»ºåª’ä½“ç®¡ç†å™¨ï¼ŒèŠ‚çœå†…å­˜
3. **å¤©ç„¶é¡¹ç›®éš”ç¦»**ï¼šé¡µé¢çº§æ¶æ„ç¡®ä¿é¡¹ç›®ä¹‹é—´å®Œå…¨éš”ç¦»ï¼Œäº’ä¸å½±å“

#### 6.2 æ•°æ®å®‰å…¨æ€§æå‡

1. **å³æ—¶ä¿å­˜ä¿éšœ**ï¼šç´ æè§£ææˆåŠŸåç«‹å³ä¿å­˜ï¼Œé¿å…æ•°æ®ä¸¢å¤±
2. **æ–‡ä»¶å®Œæ•´æ€§éªŒè¯**ï¼šé€šè¿‡SHA-256æ ¡éªŒå’Œç¡®ä¿æ–‡ä»¶å®Œæ•´æ€§
3. **åŒé‡ä¿éšœ**ï¼šé¡¹ç›®é…ç½®å’ŒMetaæ–‡ä»¶åŒé‡ä¿éšœ

#### 6.3 åŠ è½½æ€§èƒ½ä¼˜åŒ–

1. **Metaé©±åŠ¨åŠ è½½**ï¼šç›´æ¥ä»å…ƒæ•°æ®è·å–ä¿¡æ¯ï¼Œæ˜¾è‘—æå‡åŠ è½½é€Ÿåº¦
2. **æ•°æ®ä¸€è‡´æ€§**ï¼šé¿å…é…ç½®æ–‡ä»¶ä¸å®é™…æ–‡ä»¶çŠ¶æ€ä¸ä¸€è‡´
3. **å¼‚æ­¥å¤„ç†**ï¼šWebAVé‡å»ºä¸é˜»å¡ä¸»åŠ è½½æµç¨‹
4. **å®¹é”™å¤„ç†**ï¼šéƒ¨åˆ†æ–‡ä»¶ä¸¢å¤±ä¸å½±å“å…¶ä»–å†…å®¹åŠ è½½

#### 6.4 ç”¨æˆ·ä½“éªŒæ”¹è¿›

1. **å³æ—¶åé¦ˆ**ï¼šç”¨æˆ·å¯ç«‹å³çœ‹åˆ°æ–‡ä»¶ä¿å­˜çŠ¶æ€ï¼Œå¢å¼ºä¿¡ä»»æ„Ÿ
2. **å†…å­˜ä¼˜åŒ–**ï¼šåŠæ—¶é‡Šæ”¾å¤§æ–‡ä»¶å¯¹è±¡ï¼Œå‡å°‘å†…å­˜å ç”¨
3. **è¿›åº¦å¯è§†åŒ–**ï¼šæä¾›è¯¦ç»†çš„ä¿å­˜å’ŒåŠ è½½è¿›åº¦åé¦ˆ

#### 6.5 ç³»ç»Ÿç¨³å®šæ€§å¢å¼º

1. **é”™è¯¯éš”ç¦»**ï¼šå•ä¸ªæ–‡ä»¶ä¿å­˜å¤±è´¥ä¸å½±å“å…¶ä»–æ–‡ä»¶å’Œæ•´ä½“æµç¨‹
2. **è‡ªåŠ¨æ¢å¤**ï¼šåŸºäºMetaæ–‡ä»¶çš„è‡ªåŠ¨æ–‡ä»¶å‘ç°å’Œæ¢å¤æœºåˆ¶
3. **å®Œå–„çš„é”™è¯¯å¤„ç†**ï¼šè¯¦ç»†çš„é”™è¯¯åˆ†ç±»å’Œå¤„ç†ç­–ç•¥

#### 6.6 å¼€å‘ç»´æŠ¤ä¼˜åŠ¿

1. **æ¶æ„æ¸…æ™°**ï¼šé¡¹ç›®çº§ç®¡ç†å’ŒMetaé©±åŠ¨çš„è®¾è®¡æ¨¡å¼æ˜“äºç†è§£å’Œç»´æŠ¤
2. **æ‰©å±•æ€§å¼º**ï¼šä¸ºæœªæ¥çš„ç¦»çº¿ç¼–è¾‘ã€äº‘åŒæ­¥ç­‰åŠŸèƒ½å¥ å®šåŸºç¡€
3. **æµ‹è¯•å‹å¥½**ï¼šå„ä¸ªç»„ä»¶èŒè´£æ˜ç¡®ï¼Œä¾¿äºå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

### 7. é£é™©è¯„ä¼°ä¸åº”å¯¹

#### 7.1 æŠ€æœ¯é£é™©

1. **æ–‡ä»¶ç³»ç»ŸAPIå…¼å®¹æ€§**
   - é£é™©ï¼šä¸åŒæµè§ˆå™¨çš„æ–‡ä»¶ç³»ç»ŸAPIå®ç°å¯èƒ½å­˜åœ¨å·®å¼‚
   - åº”å¯¹ï¼šè¿›è¡Œå……åˆ†çš„æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•ï¼Œæä¾›é™çº§æ–¹æ¡ˆ

2. **å¤§æ–‡ä»¶å¤„ç†æ€§èƒ½**
   - é£é™©ï¼šå¤§åª’ä½“æ–‡ä»¶çš„ä¿å­˜å’ŒåŠ è½½å¯èƒ½å½±å“æ€§èƒ½
   - åº”å¯¹ï¼šå®ç°åˆ†å—å¤„ç†å’Œè¿›åº¦åé¦ˆï¼Œä¼˜åŒ–å†…å­˜ä½¿ç”¨

#### 7.2 ç”¨æˆ·ä½“éªŒé£é™©

1. **ä¿å­˜æ—¶é—´è¿‡é•¿**
   - é£é™©ï¼šå¤§é‡åª’ä½“æ–‡ä»¶å¯èƒ½å¯¼è‡´ä¿å­˜æ—¶é—´è¿‡é•¿
   - åº”å¯¹ï¼šå®ç°åå°ä¿å­˜ã€è¿›åº¦åé¦ˆå’Œå–æ¶ˆåŠŸèƒ½

2. **å­˜å‚¨ç©ºé—´ä¸è¶³**
   - é£é™©ï¼šç”¨æˆ·è®¾å¤‡å­˜å‚¨ç©ºé—´ä¸è¶³å¯èƒ½å¯¼è‡´ä¿å­˜å¤±è´¥
   - åº”å¯¹ï¼šå®ç°å­˜å‚¨ç©ºé—´æ£€æŸ¥å’Œæ¸…ç†å»ºè®®

### 8. æ–¹æ¡ˆä¼˜åŠ¿æ€»ç»“

#### 8.1 æŠ€æœ¯ä»·å€¼

1. **æ¶æ„å…ˆè¿›æ€§**ï¼šå•ä¸€èŒè´£åŸåˆ™ï¼Œç¬¦åˆç°ä»£è½¯ä»¶è®¾è®¡æœ€ä½³å®è·µ
2. **å¯ç»´æŠ¤æ€§**ï¼šç®€åŒ–çš„æ¶æ„æ›´å®¹æ˜“ç†è§£å’Œç»´æŠ¤
3. **å¯æ‰©å±•æ€§**ï¼šé¡µé¢çº§ç®¡ç†ä¸ºæœªæ¥åŠŸèƒ½æ‰©å±•æä¾›æ¸…æ™°çš„è¾¹ç•Œ

#### 8.2 ä¸šåŠ¡ä»·å€¼

1. **å¼€å‘æ•ˆç‡**ï¼šé¡µé¢çº§æ¶æ„å‡å°‘å¼€å‘å’Œç»´æŠ¤æˆæœ¬
2. **ç³»ç»Ÿç¨³å®šæ€§**ï¼šé¡µé¢çº§éš”ç¦»é¿å…å¤æ‚çš„å…¨å±€çŠ¶æ€ç®¡ç†é—®é¢˜
3. **å›¢é˜Ÿåä½œ**ï¼šæ›´æ¸…æ™°çš„èŒè´£åˆ’åˆ†ï¼Œä¾¿äºå›¢é˜Ÿåä½œå¼€å‘

### 9. å®æ–½å»ºè®®

åŸºäºé¡µé¢çº§æ¶æ„è®¾è®¡ï¼Œå»ºè®®æŒ‰ç…§ä»¥ä¸‹ä¼˜å…ˆçº§å®æ–½ï¼š

1. **P0ï¼ˆå…³é”®ï¼‰**ï¼šé˜¶æ®µ0å’Œé˜¶æ®µ1 - å®ç° ProjectMediaManager å’Œå³æ—¶ä¿å­˜æœºåˆ¶
2. **P1ï¼ˆé‡è¦ï¼‰**ï¼šé˜¶æ®µ2å’Œé˜¶æ®µ4 - Metaé©±åŠ¨åŠ è½½å’Œæµ‹è¯•éªŒè¯
3. **P2ï¼ˆä¸€èˆ¬ï¼‰**ï¼šé˜¶æ®µ3 - æ€§èƒ½ä¼˜åŒ–å’Œé«˜çº§åŠŸèƒ½

è¿™ä¸ªé¡µé¢çº§æ–¹æ¡ˆä¸ä»…è§£å†³äº†æ¶æ„ç†å¿µçš„çŸ›ç›¾é—®é¢˜ï¼Œæ›´ä¸ºé¡¹ç›®æä¾›äº†ä¸€ä¸ªæ¸…æ™°ã€é«˜æ•ˆã€æ˜“ç»´æŠ¤çš„åª’ä½“ç®¡ç†æ¶æ„ã€‚é€šè¿‡é¡µé¢çº§ç®¡ç†çš„è®¾è®¡ï¼Œæ¯ä¸ªé¡¹ç›®é¡µé¢éƒ½æ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œè¿™ä¸ºæœªæ¥çš„åŠŸèƒ½æ‰©å±•å’Œç³»ç»Ÿä¼˜åŒ–æä¾›äº†è‰¯å¥½çš„åŸºç¡€ã€‚