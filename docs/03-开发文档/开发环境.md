# å¼€å‘ç¯å¢ƒ

## ğŸ”§ ç¯å¢ƒè¦æ±‚

### ç³»ç»Ÿè¦æ±‚
- **Node.js**: >= 18.0.0
- **npm**: >= 8.0.0 (æˆ– yarn >= 1.22.0, pnpm >= 7.0.0)
- **æ“ä½œç³»ç»Ÿ**: Windows 10/11, macOS 10.15+, Linux (Ubuntu 18.04+)
- **æµè§ˆå™¨**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+

### ç¡¬ä»¶è¦æ±‚
- **å†…å­˜**: æœ€ä½ 4GB RAMï¼Œæ¨è 8GB+
- **å­˜å‚¨**: è‡³å°‘ 2GB å¯ç”¨ç©ºé—´
- **æ˜¾å¡**: æ”¯æŒ WebGL 2.0 çš„æ˜¾å¡ï¼ˆç”¨äºç¡¬ä»¶åŠ é€Ÿï¼‰

## ğŸ“¦ é¡¹ç›®è®¾ç½®

### å…‹éš†å’Œå®‰è£…
```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd aivideoeditor

# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

### éªŒè¯å®‰è£…
```bash
# æ£€æŸ¥Node.jsç‰ˆæœ¬
node --version    # åº”è¯¥ >= 18.0.0

# æ£€æŸ¥npmç‰ˆæœ¬
npm --version     # åº”è¯¥ >= 8.0.0

# æ£€æŸ¥é¡¹ç›®ä¾èµ–
npm list --depth=0
```

## ğŸ› ï¸ å¼€å‘å·¥å…·é…ç½®

### VSCodeæ¨èé…ç½®

#### æ¨èæ’ä»¶
```json
{
  "recommendations": [
    "Vue.volar",
    "Vue.vscode-typescript-vue-plugin",
    "bradlc.vscode-tailwindcss",
    "esbenp.prettier-vscode",
    "dbaeumer.vscode-eslint",
    "formulahendry.auto-rename-tag",
    "CoenraadS.bracket-pair-colorizer-2"
  ]
}
```

#### å·¥ä½œåŒºè®¾ç½®
```json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "eslint.validate": ["javascript", "typescript", "vue"],
  "typescript.preferences.importModuleSpecifier": "relative",
  "vue.codeActions.enabled": true,
  "vue.complete.casing.tags": "kebab",
  "vue.complete.casing.props": "camel"
}
```

### æµè§ˆå™¨å¼€å‘å·¥å…·

#### Chrome DevTools
- **Vue DevTools**: ç”¨äºVueç»„ä»¶è°ƒè¯•
- **Performanceé¢æ¿**: æ€§èƒ½åˆ†æå’Œä¼˜åŒ–
- **Memoryé¢æ¿**: å†…å­˜ä½¿ç”¨ç›‘æ§
- **Networké¢æ¿**: ç½‘ç»œè¯·æ±‚åˆ†æ

#### WebAVè°ƒè¯•
- **WebGL Inspector**: WebGLæ¸²æŸ“è°ƒè¯•
- **Canvas Inspector**: Canvasæ“ä½œç›‘æ§
- **Console**: WebAVæ—¥å¿—è¾“å‡º

## ğŸ—ï¸ é¡¹ç›®æ¶æ„ç†è§£

### ç›®å½•ç»“æ„
```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          # Vueç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ VideoPreviewEngine.vue    # ä¸»ç¼–è¾‘å™¨ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ PreviewWindow.vue         # è§†é¢‘é¢„è§ˆçª—å£
â”‚   â”‚   â”œâ”€â”€ Timeline.vue              # æ—¶é—´è½´ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ MediaLibrary.vue          # ç´ æåº“
â”‚   â”‚   â”œâ”€â”€ PlaybackControls.vue      # æ’­æ”¾æ§åˆ¶
â”‚   â”‚   â”œâ”€â”€ PropertiesPanel.vue       # å±æ€§é¢æ¿
â”‚   â”‚   â””â”€â”€ WebAVRenderer.vue         # WebAVæ¸²æŸ“å™¨
â”‚   â”œâ”€â”€ stores/              # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ videoStore.ts             # ä¸»çŠ¶æ€å­˜å‚¨
â”‚   â”‚   â”œâ”€â”€ modules/                  # æ¨¡å—åŒ–çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ utils/                    # å·¥å…·å‡½æ•°æ¨¡å—
â”‚   â”œâ”€â”€ composables/         # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ useWebAVControls.ts       # WebAVæ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ usePlaybackControls.ts    # æ’­æ”¾æ§åˆ¶
â”‚   â”‚   â””â”€â”€ useDragUtils.ts           # æ‹–æ‹½å·¥å…·
â”‚   â”œâ”€â”€ utils/               # å·¥å…·ç±»
â”‚   â”‚   â”œâ”€â”€ VideoVisibleSprite.ts     # è‡ªå®šä¹‰è§†é¢‘ç²¾çµ
â”‚   â”‚   â”œâ”€â”€ coordinateTransform.ts    # åæ ‡è½¬æ¢
â”‚   â”‚   â””â”€â”€ webavDebug.ts             # WebAVè°ƒè¯•å·¥å…·
â”‚   â”œâ”€â”€ types/               # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ videoTypes.ts             # è§†é¢‘ç›¸å…³ç±»å‹
â”‚   â””â”€â”€ styles/              # æ ·å¼æ–‡ä»¶
â”‚       â””â”€â”€ common.css                # é€šç”¨æ ·å¼
â”œâ”€â”€ docs/                    # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ public/                  # é™æ€èµ„æº
â”œâ”€â”€ package.json            # é¡¹ç›®ä¾èµ–é…ç½®
â”œâ”€â”€ vite.config.ts          # Viteé…ç½®
â”œâ”€â”€ tsconfig.json           # TypeScripté…ç½®
â””â”€â”€ eslint.config.ts        # ESLinté…ç½®
```

### æ¨¡å—åŒ–è®¾è®¡åŸåˆ™
é¡¹ç›®é‡‡ç”¨æ¨¡å—åŒ–æ¶æ„ï¼Œæ¯ä¸ªæ¨¡å—è´Ÿè´£ç‰¹å®šåŠŸèƒ½ï¼š

```
stores/modules/
â”œâ”€â”€ webavModule.ts      # WebAVå¼•æ“é›†æˆ
â”œâ”€â”€ mediaModule.ts      # ç´ æç®¡ç†
â”œâ”€â”€ playbackModule.ts   # æ’­æ”¾æ§åˆ¶
â”œâ”€â”€ configModule.ts     # é…ç½®ç®¡ç†
â”œâ”€â”€ trackModule.ts      # è½¨é“ç®¡ç†
â”œâ”€â”€ timelineModule.ts   # æ—¶é—´è½´æ ¸å¿ƒ
â”œâ”€â”€ viewportModule.ts   # è§†å£ç®¡ç†
â”œâ”€â”€ selectionModule.ts  # é€‰æ‹©ç®¡ç†
â””â”€â”€ clipOperationsModule.ts # ç‰‡æ®µæ“ä½œ
```

### æ•°æ®æµå‘
```
ç”¨æˆ·æ“ä½œ â†’ UIç»„ä»¶ â†’ VideoStore â†’ æ¨¡å—çŠ¶æ€ â†’ WebAVå¼•æ“
                                              â†“
UIæ›´æ–° â† çŠ¶æ€å˜åŒ– â† äº‹ä»¶ç›‘å¬ â† WebAVäº‹ä»¶ â† æ¸²æŸ“æ›´æ–°
```

## ğŸ”„ å¼€å‘å·¥ä½œæµ

### æ·»åŠ æ–°åŠŸèƒ½

#### 1. åˆ†æéœ€æ±‚
- ç¡®å®šåŠŸèƒ½å±äºå“ªä¸ªæ¨¡å—
- åˆ†ææ•°æ®æµå’ŒçŠ¶æ€å˜åŒ–
- ç¡®å®šéœ€è¦çš„UIç»„ä»¶

#### 2. åˆ›å»ºæˆ–ä¿®æ”¹æ¨¡å—
```typescript
// ç¤ºä¾‹ï¼šæ·»åŠ æ–°çš„é…ç½®é€‰é¡¹
export function createConfigModule() {
  const newOption = ref(defaultValue)
  
  function setNewOption(value: any) {
    newOption.value = value
    console.log('æ–°é€‰é¡¹å·²è®¾ç½®:', value)
  }
  
  return {
    newOption,
    setNewOption
  }
}
```

#### 3. æ›´æ–°VideoStore
```typescript
// åœ¨videoStore.tsä¸­é›†æˆæ–°æ¨¡å—
const configModule = createConfigModule()

return {
  // å¯¼å‡ºæ–°çŠ¶æ€å’Œæ–¹æ³•
  newOption: configModule.newOption,
  setNewOption: configModule.setNewOption
}
```

#### 4. åˆ›å»ºæˆ–æ›´æ–°UIç»„ä»¶
```vue
<template>
  <div class="new-feature">
    <!-- UIå†…å®¹ -->
  </div>
</template>

<script setup lang="ts">
import { useVideoStore } from '../stores/videoStore'

const videoStore = useVideoStore()

// ä½¿ç”¨æ–°åŠŸèƒ½
const handleNewFeature = () => {
  videoStore.setNewOption(newValue)
}
</script>
```

### Gitå·¥ä½œæµ

#### åˆ†æ”¯ç­–ç•¥
```bash
# ä¸»åˆ†æ”¯
main                    # ç”Ÿäº§ç¯å¢ƒä»£ç 
develop                 # å¼€å‘ç¯å¢ƒä»£ç 

# åŠŸèƒ½åˆ†æ”¯
feature/feature-name    # æ–°åŠŸèƒ½å¼€å‘
bugfix/bug-description  # Bugä¿®å¤
hotfix/urgent-fix      # ç´§æ€¥ä¿®å¤
```

#### æäº¤è§„èŒƒ
```bash
# æäº¤æ¶ˆæ¯æ ¼å¼
type(scope): description

# ç±»å‹è¯´æ˜
feat:     æ–°åŠŸèƒ½
fix:      Bugä¿®å¤
docs:     æ–‡æ¡£æ›´æ–°
style:    ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test:     æµ‹è¯•ç›¸å…³
chore:    æ„å»ºå·¥å…·æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

# ç¤ºä¾‹
feat(timeline): æ·»åŠ å¤šé€‰åŠŸèƒ½
fix(webav): ä¿®å¤å†…å­˜æ³„æ¼é—®é¢˜
docs(api): æ›´æ–°APIæ–‡æ¡£
```

## ğŸ› è°ƒè¯•æŠ€å·§

### WebAVè°ƒè¯•
```typescript
// ä½¿ç”¨å†…ç½®è°ƒè¯•å·¥å…·
import { logWebAVReadyStateChange, debugError } from '../utils/webavDebug'

// ç›‘æ§WebAVçŠ¶æ€å˜åŒ–
watch(() => videoStore.isWebAVReady, (isReady, wasReady) => {
  logWebAVReadyStateChange(isReady, wasReady)
})

// é”™è¯¯å¤„ç†
try {
  await webAVOperation()
} catch (error) {
  debugError('WebAVæ“ä½œå¤±è´¥', error, { context: 'additional info' })
}
```

### æ€§èƒ½ç›‘æ§
```typescript
// ä½¿ç”¨æ€§èƒ½è®¡æ—¶å™¨
const timer = createPerformanceTimer('æ“ä½œåç§°')
await performOperation()
const duration = timer.end()
console.log(`æ“ä½œè€—æ—¶: ${duration}ms`)
```

### çŠ¶æ€è°ƒè¯•
```typescript
// åœ¨ç»„ä»¶ä¸­æ·»åŠ è°ƒè¯•ä¿¡æ¯
onMounted(() => {
  console.log('ç»„ä»¶çŠ¶æ€:', {
    mediaItems: videoStore.mediaItems.value.length,
    timelineItems: videoStore.timelineItems.value.length,
    isWebAVReady: videoStore.isWebAVReady.value
  })
})
```

### å¸¸ç”¨è°ƒè¯•å‘½ä»¤
```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆå¸¦è°ƒè¯•ä¿¡æ¯ï¼‰
npm run dev

# ç±»å‹æ£€æŸ¥
npm run type-check

# ä»£ç æ£€æŸ¥
npm run lint

# ä»£ç æ ¼å¼åŒ–
npm run format

# æ„å»ºé¡¹ç›®
npm run build

# é¢„è§ˆæ„å»ºç»“æœ
npm run preview
```

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•
```typescript
// æµ‹è¯•æ¨¡å—åŠŸèƒ½
describe('ConfigModule', () => {
  it('åº”è¯¥æ­£ç¡®è®¾ç½®é…ç½®é€‰é¡¹', () => {
    const module = createConfigModule()
    module.setNewOption('test-value')
    expect(module.newOption.value).toBe('test-value')
  })
})
```

### é›†æˆæµ‹è¯•
```typescript
// æµ‹è¯•ç»„ä»¶é›†æˆ
describe('VideoPreviewEngine', () => {
  it('åº”è¯¥æ­£ç¡®åˆå§‹åŒ–WebAV', async () => {
    const wrapper = mount(VideoPreviewEngine)
    await nextTick()
    expect(wrapper.vm.videoStore.isWebAVReady).toBe(true)
  })
})
```

### æ‰‹åŠ¨æµ‹è¯•æ¸…å•
- [ ] è§†é¢‘æ–‡ä»¶å¯¼å…¥åŠŸèƒ½
- [ ] æ—¶é—´è½´æ‹–æ‹½æ“ä½œ
- [ ] æ’­æ”¾æ§åˆ¶åŠŸèƒ½
- [ ] è§†é¢‘å±æ€§è°ƒæ•´
- [ ] åˆ†è¾¨ç‡åˆ‡æ¢
- [ ] é”™è¯¯å¤„ç†å’Œæ¢å¤

## ğŸš€ æ„å»ºå’Œéƒ¨ç½²

### æ„å»ºå‘½ä»¤
```bash
# å¼€å‘æ„å»º
npm run dev

# ç”Ÿäº§æ„å»º
npm run build

# ç±»å‹æ£€æŸ¥
npm run type-check

# ä»£ç æ£€æŸ¥
npm run lint

# ä»£ç æ ¼å¼åŒ–
npm run format
```

### éƒ¨ç½²æ£€æŸ¥æ¸…å•
- [ ] æ‰€æœ‰TypeScripté”™è¯¯å·²ä¿®å¤
- [ ] ESLintæ£€æŸ¥é€šè¿‡
- [ ] æ„å»ºæˆåŠŸæ— è­¦å‘Š
- [ ] åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½æµ‹è¯•é€šè¿‡
- [ ] æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•

### ç¯å¢ƒå˜é‡é…ç½®
```bash
# å¼€å‘ç¯å¢ƒ (.env.development)
VITE_APP_TITLE=AIè§†é¢‘ç¼–è¾‘å™¨
VITE_API_BASE_URL=http://localhost:3000/api
VITE_ENABLE_DEBUG=true
VITE_WEBAV_DEBUG=true

# ç”Ÿäº§ç¯å¢ƒ (.env.production)
VITE_APP_TITLE=AIè§†é¢‘ç¼–è¾‘å™¨
VITE_API_BASE_URL=https://api.example.com
VITE_ENABLE_DEBUG=false
VITE_WEBAV_DEBUG=false
```

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [æ¶æ„è®¾è®¡](æ¶æ„è®¾è®¡.md) - ç³»ç»Ÿæ¶æ„è®¾è®¡å’ŒæŠ€æœ¯é€‰å‹
- [APIæ–‡æ¡£](APIæ–‡æ¡£.md) - è¯¦ç»†çš„APIæ¥å£æ–‡æ¡£
- [ä»£ç è§„èŒƒ](ä»£ç è§„èŒƒ.md) - ç¼–ç æ ‡å‡†å’Œæœ€ä½³å®è·µ
- [æ•…éšœæ’é™¤](../02-ç”¨æˆ·æŒ‡å—/æ•…éšœæ’é™¤.md) - å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ

---

**æç¤º**ï¼šå¼€å‘ç¯å¢ƒé…ç½®å®Œæˆåï¼Œå»ºè®®å…ˆé˜…è¯»æ¶æ„è®¾è®¡æ–‡æ¡£ï¼Œäº†è§£é¡¹ç›®çš„æ•´ä½“æ¶æ„å’Œè®¾è®¡ç†å¿µã€‚
